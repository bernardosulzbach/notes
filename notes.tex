% arara: pdflatex
% arara: biber
% arara: pdflatex
% arara: pdflatex

\documentclass[12pt, oneside]{book}
\usepackage[a4paper, total={16cm, 20cm}]{geometry}
\usepackage[utf8]{inputenc}
\usepackage{csquotes}
% Enables proper hyphenation and informs other packages of the language this document uses.
\usepackage[english]{babel}
\usepackage[backend=biber]{biblatex}
% Latin Modern (a font with all the characters).
\usepackage{lmodern}
\usepackage{multirow}
% Proof environment.
\usepackage{amsthm}
% Vertical matrices.
\usepackage[fleqn]{amsmath}
% Set symbols (N, Z, Q, R, C).
\usepackage{amssymb}
% The \midrule glyph.
\usepackage{booktabs}
% To get "not equivalent to".
\usepackage{centernot}
\usepackage{listings}
% Turns off the indentation and adds a little bit of (stretchable) space in between paragraphs.
\usepackage{parskip}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{hyperref}
\usepackage[dvipsnames]{xcolor}
\usepackage{commath}
% Fixes fragile \( and \).
\usepackage{fixltx2e}
% In order to be able to split strings to pretty print binary strings.
\usepackage{xstring}
\usepackage[iso, english]{isodate}
\usepackage[lastexercise]{exercise}

% Fix spacing before Theorems, which is a problem introduced by parskip.
\begingroup
    \makeatletter \@for\theoremstyle:=definition,remark,plain\do{\expandafter\g@addto@macro\csname th@\theoremstyle\endcsname{\addtolength\thm@preskip\parskip}}
\endgroup

\addbibresource{bibliography.bib}

\newtheorem{theorem}{Theorem}

\definecolor{redwood}{HTML}{A85751}
\definecolor{boysenberry}{HTML}{7D2E68}
\definecolor{russianviolet}{HTML}{251351}

\hypersetup{
    colorlinks,
    urlcolor=russianviolet,
    linkcolor=redwood,
    citecolor=boysenberry,
    linktoc=all
}

% Improve exercise and answer headers.
% See http://linorg.usp.br/CTAN/macros/latex/contrib/exercise/exercise.pdf for more.
\renewcommand{\ExerciseHeader}{\textbf{\large{Exercise \ExerciseHeaderNB}}\par}
\renewcommand{\AnswerHeader}{\textbf{\large{Answer of exercise \ExerciseHeaderNB}}\par}
\renewcommand{\AnswerSkipBefore}{\ExerciseSkipBefore}

% Operators
\DeclareMathOperator\cis{cis}

\newcommand*\conj[1]{\bar{#1}}
\newcommand*\mean[1]{\bar{#1}}
\newcommand*\reciprocal[1]{\frac{1}{#1}}
\newcommand*\argument{\phi}

% Number sets
\newcommand*\primes{\mathbb{P}}
\newcommand*\naturalnumbers{\mathbb{N}}
\newcommand*\wholenumbers{\mathbb{W}}
\newcommand*\integers{\mathbb{Z}}
\newcommand*\rationalnumbers{\mathbb{Q}}
\newcommand*\irrationalnumbers{\mathbb{I}}
\newcommand*\reals{\mathbb{R}}
\newcommand*\complexnumbers{\mathbb{C}}

% Formats a string as a 32-bit IEEE floating point number.
\newcommand*\singleprecision[1]
    {\StrSplit{#1}{1}{\signbit}{\tail}
     \StrSplit{\tail}{8}{\exponentbits}{\significandbits}
        \texttt{\signbit}
        \texttt{\exponentbits}
        \texttt{\significandbits}}

\lstset{frame=tb,
	language=Java,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=left,
	breaklines=true,
	breakatwhitespace=true
}

\title{\Huge Notes}
\author{Bernardo Sulzbach}
\date{\texttt{Release \input{release.txt}}}

\begin{document}

\hypersetup{pageanchor=false} % This prevents a warning.
\begin{titlepage}
\maketitle
\end{titlepage}
\hypersetup{pageanchor=true}

\tableofcontents

\part{Introduction}
\chapter{Preface}
\section{Word from the author}

This document is a collection of notes, formulas, and solved problems about various subjects. It exists mainly for reference purposes.

\textbf{I strongly discourage the printing of this document}.

If you wish to make any contribution, try to find reliable sources for your text. The citations are using the IEEE style.

\chapter{Conventions}

The following conventions should be followed to ensure a consistent style throughout this document.

Each reference number should be enclosed in square brackets on the same line as the text, before any punctuation, with a space before the bracket.
Scholar work is developed by thinking about the ideas of others.
It is legitimate and appropriate to synthesise the work of others, providing you acknowledge the sources.

\section{Titles}

Titles should be typeset using sentence case.

When writing a genus and species, do not capitalize the species.

Leave lowercase the parts of an individual's name that are traditionally lowercase.

\part{Chemistry}

\chapter{Gases}

Ideal gas law
\[PV = nRT\]

Diffusion. Diffusion is the rate at which two gases mix.
Effusion. Effusion is the rate at which a gas escapes through a pin hole.

Graham's law of diffusion or effusion

Graham's law states that the rate of effusion or of diffusion of a gas is
inversely proportional to the square root of its molecular weight.

\[\frac{R_1}{R_2} = \sqrt{\frac{M_2}{M_1}}\]

In the same conditions of temperature and pressure, the molar mass is
proportional to the mass density. Therefore the rate of diffusion of different
gases is inversely proportional to the square root of their mass densities.

\[\frac{R_1}{R_2} = \sqrt{\frac{M_2}{M_1}}\]

\chapter{Solutions}

Solution. A solution is a homogeneous mixture of two or more substances.

Solute is a substance that is dissolved in the solution.

Solvent is the substance that dissolves the solute. Solvent is present in
greater amount.

Concentration is the ratio of solute and solvent.

Concentration can be measured using molarity, molality and mole fraction.

\[\text{Molarity (M)} = \frac{\text{moles of solute}}{\text{liters of
solution}}\]

\[\text{Molality (m)} = \frac{\text{moles of solute}}{\text{kg of solution}}\]

Mole fraction. The mole fraction of a component in solution is the number of
moles of that component divided by the total number of moles of all components
in the solution.

\[X_A = \frac{n_A}{\sum{n_x}}\]

Dilution. Diluting a solution means adding more solvent without adding more
solute.
The following formula is quite helpful in these calculations.

\[M_i V_i = M_f V_f\]

Mole. Mole is the amount of substance that contains same number of particles as
there are atoms in 12 grams of pure carbon-12.

One mole of substance is Avogadro's number.

The number of molecules in a mole is known as Avogadro's constant.

\[N_A = 6.023 \cdot 10^{23}\]

One mole of gas has a volume of 22.4 liters at Standard Temperature and
Pressure.

Relation between moles and grams.
One mole of a substance weights the molecular weight of substance in grams.

\chapter{Atomic properties}

Ionization energy. Ionization energy is qualitatively defined as the amount of
energy required to remove the most loosely bound electron of an isolated
gaseous atom to form a cation. It is always endothermic (positive).

\chapter{Acids and bases}

The Henderson-Hasselbalch equation describes the derivation of pH as a
measure of acidity (using pKa, the negative log of the acid dissociation
constant).

\[pH = pK_a + \log_{10} \frac{[\text{A}^-]}{[\text{HA}]}\]
\[pOH = pK_b + \log_{10} \frac{[\text{BH}^+]}{[\text{B}]}\]

where [A-] is the concentration of conjugate base and [HA] is the concentration
of the acid.

\section{pH of salts}
Salts from strong bases and strong acids do not hydrolyze (pH 7).

Salts from strong bases and weak acids give a pH higher than 7 when hydrolyzed.

Salts from weak bases and strong acids give a pH lower than 7 when hydrolyzed.

\chapter{Kinetics}

One of the most important topics of chemical kinetics is the \textbf{rate law}.
The rate law is an expression relating the rate of a reaction to the
concentrations of the chemical species present, which may include reactants,
products, and catalysts. Many reactions follow a simple rate law, which takes
the form
\[v = k [A]^\alpha [B]^\beta \ldots\]
For reactions with multiple steps, the rate law, rate constant, and order are
determined by experiment, and the orders are \textbf{not} generally the same as
the stoichiometric coefficients in the reaction equation.  A final important
point about rate laws is that overall rate laws for a reaction may contain
reactant, product and catalyst concentrations, but must not contain
concentrations of intermediates.

\paragraph{Law of Mass Action.} The law of mass action is a general description
of the equilibrium condition; it defines the \textit{equilibrium constant
expression}.
\[K_C = \frac{[C]^\gamma [D]^\delta}{[A]^\alpha [B]^\beta}\]

\paragraph{Notes on the equilibrium expression.} The equilibrium expression for
a reaction is the reciprocal of that for the reaction written in reverse. When
the equation for a reaction is multiplied by n, \(K\) is raised to n.  The
units for \(K\) depend on the reaction being considered, but it is
\textbf{customarily written without units}.

\paragraph{Equilibrium in terms of pressure.} The equilibrium expression for a
reaction can be written in terms of partial pressures.
\[K_P = \frac{\left(P_C\right)^\gamma
\left(P_D\right)^\delta}{\left(P_A\right)^\alpha \left(P_B\right)^\beta}\]
\[K_P = K_C (RT)^{\Delta n}\]
where

n is the difference between the number of moles of gases in the products and in
the reactants.

\paragraph{Heterogeneous Equilibrium.} The equilibrium constant does not depend
on the amounts of pure solid
or liquids present. Just gases and aqueous solutions are taken into account.

\paragraph{The Reaction Quotient (Q).} In general, all reacting chemical
systems are characterized by their Reaction Quotient, Q. It has the same
formula as K, but can be used even when the system is not at equilibrium.

\paragraph{Le Chatelier's Principle.} \textit{If a system at equilibrium is
disturbed, the system tends to shift its equilibrium position to counter the
effect of the disturbance.}

\chapter{Organic chemistry}
Organic chemistry is dominated by the functional group approach, where organic
molecules are constructed from an inert hydrocarbon skeleton onto which
functional groups are attached.

The properties and reaction chemistry of a particular functional group are
highly independent of environment. Therefore, it is only necessary to know about
the chemistry of a few functions in order to predict the chemical behavior of
thousands of real organic chemicals.

\section{Alcohols}
\subsection{Primary alcohol}
Primary alcohols have an -OH function attached to an R-CH2- group.

Primary alcohols can be oxidised to aldehydes and on to carboxylic acids.

Primary alcohols can be shown as \texttt{RCH2OH}.

\subsection{Secondary alcohol}
Secondary alcohols have an -OH function attached to a R2CH- group.

Secondary alcohols can be oxidised to ketones.

Secondary alcohols can be shown as \texttt{R2CHOH}.

\subsection{Tertiary alcohol}
Tertiary alcohols have an -OH function attached to a R3C- group.

Tertiary alcohols are resistant to oxidation with acidified potassium
dichromate(VI), K.

Tertiary alcohols can be shown as \texttt{R3COH}.

\section{Diol or polyol}
Diols and polyols are alcohols with two or more -OH functions.

Diols and polyols are very soluble in water. They are used as high temperature
polar solvents.

\section{Aldehydes}
Aldehydes have a hydrogen and an alkyl (or aromatic) group attached to a
carbonyl function.

Aldehydes are easily oxidized to carboxylic acids, and they can be reduced to
primary alcohols.

Aldehydes can be shown as \texttt{RCHO}.

\section{Ketones}
Ketones have a pair of alkyl or aromatic groups attached to a carbonyl function.

Ketones can be shown as \texttt{RCOR}.

\section{Carboxylic acids}
Carboxylic acids have an alkyl or aromatic groups attached to a hydroxy-carbonyl
function.

Carboxylic acids can be shown as \texttt{RCOOH}.

Carboxylic acids are weak Bronsted acids.

\section{Esters}
Esters have a pair of alkyl or aromatic groups attached to a carbonyl + linking
oxygen function.

Esters can be shown as \texttt{RCOOR}.

The reaction between a carboxylic acid and an alcohol produces an ester and
water.
This is an acid catalyzed equilibrium.

\section{Amides}
\subsection{Primary amides}
Primary amides have an alkyl or aromatic group attached to an amino-carbonyl
function.

Primary amides can be shown as \texttt{RCONH2}.

\subsection{Secondary amides}
Secondary amides have an alkyl or aryl group attached to the nitrogen:
\texttt{RCONHR}.

\subsection{Tertiary amides}
Tertiary amides have two alkyl or aryl group attached to the nitrogen:
\texttt{RCONR2}.

\section{Amines}
\subsection{Primary amine}
Primary amines have an alkyl or aromatic group and two hydrogens attached to a
nitrogen atom.

Primary amines are basic functions that can be protonated to the corresponding
ammonium ion.
Primary amines are also nucleophilic.

Primary amines can be shown as \texttt{RNH2}.

\subsection{Secondary amine}
Secondary amines have a pair of alkyl or aromatic groups, and a hydrogen,
attached to a nitrogen atom.

Secondary amines are basic functions that can be protonated to the corresponding
ammonium ion.
Secondary amines are also nucleophilic.

Secondary amines can be shown as \texttt{R2NH}.

\subsection{Tertiary amine}
Tertiary amines have three alkyl or aromatic groups attached to a nitrogen atom.

Tertiary amines are basic functions that can be protonated to the corresponding
ammonium ion.
Tertiary amines are also nucleophilic.

Tertiary amines can be shown as \texttt{R3N}.

\section{Acid chlorides}
Acid chlorides, or acyl chlorides, have an alkyl (or aromatic) group attached to
a carbonyl function plus a labile (easily displaced) chlorine.

Acid chlorides highly reactive entities are highly susceptible to attack by
nucleophiles.
Acid chlorides can be shown as \texttt{RCOCl}.

\section{Acid anhydrides}
Acid anhydrides are formed when water is removed from a carboxylic acid, hence
the name.

Acid anhydrides can be shown as \texttt{(RCO)2O}.

\section{Nitriles}
Nitriles (or organo cyanides) have an alkyl (or aromatic) group attached to a
carbon-triple-bond-nitrogen function.

Nitriles can be shown as \texttt{RCN}.

Note that there is a nomenclature issue with nitriles/cyanides. If a compound is
named as the nitrile then the nitrile carbon is counted and included, but when
the compound is named as the cyanide it is not.

For instance, \texttt{CH3CH2CN} is called propane nitrile or ethyl cyanide
(cyanoethane).

\section{Carboxylate ion or salt}
Carboxylate ions are the conjugate bases of carboxylic acids, i.e. the
deprotonated carboxylic acid.

When the counter ion is included, the salt is being shown.

Salts can be shown as \texttt{RCOONa}.

\section{Amino acids}
Amino acids, strictly alpha-amino acids, have carboxylic acid, amino function
and a hydrogen attached to a the same carbon atom.

There are 20 naturally occurring amino acids. All except glycine (R = H) are
chiral and only the L enantiomer is found in nature.

Amino acids can be shown as \texttt{R-CH(NH2)COOH}.

\section{Ethers}
Ethers have a pair of alkyl or aromatic groups attached to a linking oxygen
atom.

Ethers are surprisingly unreactive and are very useful as solvents for many many
(but not all) classes of reaction.

Ethers can be shown as \texttt{ROR}.

\section{Polymer}
Polymers consist of small monomer molecules that have reacted together so as to
form a large covalently bonded structure.

There are two general types of polymerisation: addition and condensation.

Linear chain polymers are generally thermoplastic, while three dimensional
network polymers are not. \textbf{Thermoplastic polymers} become pliable or
moldable above a specific temperature and solidify upon cooling, while
\textbf{thermosetting polymers} cure irreversibly. The cure may be induced by
heat, through a chemical reaction, or suitable irradiation. Thermoset materials
are usually liquid or malleable prior to curing and designed to be molded into
their final form, or used as adhesives. Once hardened a thermoset resin cannot
be reheated and melted to be shaped differently.

\part{Physics}

\chapter{Kinetics}
\[S = S_0 + V_0 t + \frac{a t^2}{2}\]
\[V_f^2 = V_i^2 + 2 a \Delta S\]

\chapter{Waves}
\[v = \lambda f\]

\section{Doppler effect}
\[f = f_0 \left ( \frac{v + v_r}{v + v_s} \right )\]

where

\(v\) is the velocity of waves in the medium;

\(v_r\) is the velocity of the receiver relative to the medium; positive if the
receiver is moving towards the source (and negative in the other direction);

\(v_s\) is the velocity of the source relative to the medium; positive if the
source is moving away from the receiver (and negative in the other direction).

One can remember that the velocities are positive if the receiver is chasing
the source.

\section{Sound intensity}
For a spherical sound wave, the intensity in the radial direction as a function
of distance \(r\) from the center of the sphere is given by

\[I(r) = \frac{P}{A(r)} = \frac{P}{4 \pi r^2}\]

\section{Pendulum}
The period of swing of a simple gravity pendulum depends on its length, the
local strength of gravity, and to a small extent on the maximum angle that the
pendulum swings away from vertical, called the amplitude. It is independent of
the mass of the bob. If the amplitude is limited to small swings, the period T
of a simple pendulum, the time taken for a complete cycle, is:
\[T \approx 2 \pi \sqrt{\frac{l}{g}}\]

\chapter{Optics}
\section{Mirrors and lenses}
\textbf{Focal length}
\[\reciprocal{f} = \reciprocal{p} + \reciprocal{p'}\]
A positive value for \(p'\) indicates a real image, while a negative value
indicates a virtual image.

\(f\) is positive for concave mirrors and convex lenses, and negative for convex
mirrors and concave lenses.

\textbf{Magnification}
\[m = \frac{h'}{h} = - \frac{p'}{p} = \frac{f}{f - p}\]
\(h'\) is positive if the image is upright and negative if the image is upside
down. The value of \(h\) is always positive because the object is always
upright.

\chapter{Gases}
\[P = P_A + \rho g h\]
\[\tau = P \Delta V\]

\chapter{Electricity}
\[U = R i\]
\[P = i U\]
Resistance of a parallel association of resistors:
\[\reciprocal{R_{eq}} = \sum{\reciprocal{R_i}}\]

\section{Electric force}
\[F_{el} = \frac{k Q q}{r^2}\]

\section{Transformers}
A transformer makes use of Faraday's law and the ferromagnetic properties of an
iron core to efficiently raise or lower alternating current (AC) voltages.
For an ideal transformer, the voltage ratio is equal to the turns ratio, and
power in equals power out.

\[\frac{V_1}{V_2} = \frac{N_1}{N_2}\]

\[P_{\text{in}} = P_{\text{out}}\]

\chapter{Electromagnetism}

\section{Magnetic force}
\[F_{mag} = B q v = B i l\]

\section{Magnetic fields}
\[B_{\text{wire}} = \frac{i \mu_0}{2 \pi r}\]
\[B_{\text{current loop}} = \frac{i \mu_0}{2 r}\]
\[B_{\text{solenoid}} = \frac{i \mu_0 N}{l}\]

where \(N\) is the number of coils and \(l\) is the length of the solenoid in
meters.

\section{Lenz's law}
Lenz's law is a common way of understanding how electromagnetic circuits obey
Newton's third law and the conservation of energy.
\begin{quote}
If an induced current flows, its direction is always such that it will oppose
the change which produced it.
\end{quote}
Lenz's law is shown with the negative sign in Faraday's law of induction:
\[{E}=-\frac{\partial \Phi}{\partial t}\]

\chapter{Modern physics}
\[E = hf = h\frac{c}{\lambda}\]

\section{Lorentz factor}
The Lorentz factor is the factor by which time, length, and relativistic mass
change for an object while that object is moving.
\[\gamma = \reciprocal{\sqrt{1 - \frac{v^2}{c^2}}}\]

\section{Superposition}
Superposition is a principle of quantum theory that describes a challenging
concept about the nature and behavior of matter and forces at the sub-atomic
level. The principle of superposition claims that while we do not know what the
state of any object is, it is actually in all possible states simultaneously,
as long as we don't look to check. It is the measurement itself that causes the
object to be limited to a single possibility. It can also be said that there is
no single outcome unless it is observed.

Superposition is well illustrated by \textbf{Thomas Young's double-slit
experiment}, developed in the early nineteenth century to prove that light
consisted of waves. Richard Feynman claimed that the essentials of quantum
mechanics could be grasped by an exploration of the implications of Young's
experiment.

In this experiment, a beam of light is aimed at a barrier with two vertical
slits.  The light passes through the slits and the resulting pattern is
recorded.  If one slit is covered, the pattern is what would be expected: a
single line of light, aligned with whichever slit is open. Intuitively, one
would expect that if both slits are open, the pattern of light will reflect
that fact: two lines of light, aligned with the slits.  However, what happens
is that the plate is entirely separated into multiple lines of lightness and
darkness in varying degrees.  What is being illustrated by this result is that
interference is taking place between the waves/particles going through the
slits, in what, seemingly, should be two non-crossing trajectories.

We would expect that if the beam of light particles or photons is slowed enough
to ensure that individual photons are hitting the plate, there could be no
interference and the pattern of light would be two lines of light, aligned with
the slits. In fact, however, the resulting pattern still indicates
interference, which means that, somehow, the single particles are interfering
with themselves. This seems impossible: we expect that a single photon will go
through one slit or the other, and will end up in one of two possible light
line areas. But that is not what happens. As Feynman concluded, each photon not
only goes through both slits, but simultaneously takes every possible
trajectory en route to the target.

In order to see how this might possibly occur, experiments have focused on
tracking the paths of individual photons. What happens in this case is that the
measurement in some way disrupts the photons' trajectories (in accordance with
the uncertainty principle), and somehow, the results of the experiment become
what would be predicted by classical physics: two bright lines on the
photographic plate, aligned with the slits in the barrier. Cease the attempt to
measure, however, and the pattern will again become multiple lines in varying
degrees of lightness and darkness. Each photon moves simultaneously in a
superposition of possible trajectories, and, furthermore, measurement of the
trajectory causes the superposition of states to collapse to a single position.

Text extracted from
\href{http://whatis.techtarget.com/definition/superposition}{WhatIs}.

\part{Mathematics}

\chapter{Significant figures}

\section{Definition}
The significant figures of a number are those digits that carry meaning
contributing to its precision. This includes all digits except all leading zeros
and trailing zeros when they are used to indicate the scale of the number.

\section{Calculations}
The result of addition and subtraction should have as many decimal places as the
term with less decimal places.

The result of multiplication and division should have as many significant
figures as the least precise term.

\section{Rounding}
If the first non-significant figure is a 5 not followed by any other digits or
followed only by zeros, rounding requires a tie-breaking rule.
\paragraph{Round half up} is the default rounding method implied in many
disciplines if not specified.
\paragraph{Round half to even} which rounds to the nearest even number.

\chapter{Set theory}

\section{Power set}
The power set \(P(S)\) is the set of all subsets of \(S\), including the empty
set and the set \(S\) itself.

It has \(2^n\) elements where \(n\) is the number of elements in \(S\).

\chapter{Linear algebra}

\section{Row operations}
\begin{itemize}
\item{Replace one row by the sum of itself and a multiple of another row.}
\item{Interchange two rows.}
\item{Multiply all entries in a row by a nonzero constant.}
\end{itemize}

\section{Row equivalence}
Two matrices are \textbf{row equivalent} if, and only if, there is a sequence
of row operations that transform one matrix into another.
Row equivalence is indicated by a tilde (\(\sim\)) between matrices.
\section{Echelon form}
A matrix is in \textbf{echelon form} if it has the shape resulting from a
Gaussian
elimination.
The following are properties of the echelon matrix:
\begin{itemize}
\item{All nonzero rows are above any rows of all zeros.}
\item{The leading entry of a row is at least one column to the right of the
leading entry of the row above it.}
\end{itemize}
The following are properties of the \textbf{reduced echelon matrix}:
\begin{itemize}
\item{The leading entry in any nonzero row is 1.}
\item{Each leading 1 is the only nonzero in its column.}
\end{itemize}

\section{Row reducing algorithm}
The \textbf{forward phase} of the row reducing algorithm produces the row
echelon form.
The \textbf{backward phase} produces the unique reduced row echelon form.
Computer algorithms usually select as a pivot the entry in a column that has the
largest value.
This strategy, called partial pivoting, is used to reduce roundoff errors in the
calculations.
Computers do not perform the backward phase in order to find the reduced echelon
form, instead,
they perform back substitution.
The best strategy is to use the reduced echelon form only when solving a system
by hand.
A flop is one arithmetic operation (+, -, *, /) on two real floating point
numbers.
(Traditionally, + and - were not considered to be flops, but nowadays they are).

\section{Solution existence and uniqueness}
A solution exists if there are no invalid equations, such as \( 0 = 1 \). The
solution is unique if, and only if, there are no free variables.

\subsection{Existence and uniqueness theorem}
A system is consistent if, and only if, the rightmost column of the augmented
matrix is not a pivot column.
Stated differently, a matrix equation of the form \(A\mathbf{x} = \mathbf{b}\)
has a solution if, and only if, \(\mathbf{b}\) is a linear combination of the
columns of \(\mathbf{A}\), that is, if \(\mathbf{b} \in \mathrm{Span}
\{\mathbf{a}_1, \ldots, \mathbf{a}_n\}\).

\section{Parallelogram rule for addition}
If \(\mathbf{u}\) and \(\mathbf{v}\) in \(\mathbb{R}^2\)
are represented as points in the plane,
then \(\mathbf{u} + \mathbf{v}\) corresponds to the fourth vertex of the
parallelogram whose other vertices are \(\mathbf{0}\), \(\mathbf{u}\) and
\(\mathbf{v}\).

\section{Linear combinations}
Given vectors \(\mathbf{v}_1, \mathbf{v}_2, \ldots, \mathbf{v}_p\) in
\(\mathbb{R}^n\) and given scalars \(c_1, c_2, \ldots, c_p\) in \(\mathbb{R}\),
the vector \(\mathbf{y}\) defined by
\[ \mathbf{y} = c_1 \mathbf{v}_1 + \ldots + c_p \mathbf{v}_p \]
is called a \textbf{linear combination} of
\(\mathbf{v}_1, \ldots, \mathbf{v}_p\) with weights \(c_1, \ldots, c_p\).

\section{Span}
The set of all linear combinations of \(\mathbf{v}_1, \ldots, \mathbf{v}_p\) in
\(\mathbb{R}^n\) is called the \textbf{subset of}\(\mathbb{R}^n\) spanned (or
generated) by \(\mathbf{v}_1, \ldots, \mathbf{v}_p\) and is denoted by

\(\mathrm{Span}\{\mathbf{v}_1, \ldots, \mathbf{v}_p\}\). If a matrix \(A\) has a
pivot in every row, then \(\mathrm{Span} \{\mathbf{a}_1, \ldots, \mathbf{a}_n\}
= \mathbb{R}^m\).

\section{Matrix equation solution}
If \(A\) is a \(m \times n\) matrix, with columns \(\mathbf{a}_1, \ldots,
\mathbf{a}_n\) and \(\mathbf{b}\) is in \(\mathbb{R}^m\),
the matrix equation
\[ A\mathbf{x} = \mathbf{b} \]
has the same solution as the vector equation
\[ x_1\mathbf{a}_1 + \ldots + x_n\mathbf{a}_n = \mathbf{b} \]
which, in turn,
has the same solution as the system of linear equations whose
augmented matrix is
\[ [ \mathbf{a}_1 \ldots \mathbf{a}_n \mathbf{b} ] \]

\section{Solution sets of linear systems}
A system of linear equations is \textbf{homogeneous}
if it can be written in the form \( \mathbf{A x} = \mathbf{0} \).
All homogeneous systems have a \textbf{trivial solution} that is \(\mathbf{0}\).
If the system has at least one free variable, it has a nontrivial solution.

\begin{theorem}
  Suppose that \( \mathbf{Ax} = \mathbf{b} \) is consistent for some given
  \(\mathbf{b}\), let \(\mathbf {p}\) be a solution. Then the solution set of
  \( \mathbf{Ax} = \mathbf{b} \) is the set of all vectors of the form
  \( \mathbf{w} = \mathbf{p} + \mathbf{v} \), where \( \mathbf{v} \) is any
  solution of the homogeneous equation \( \mathbf{Ax} = \mathbf{0} \).
\end{theorem}

\section{Solution of a system in parametric form}
\begin{enumerate}
\item{Row reduce the augmented matrix to reduced row echelon form.}
\item{Express each basic variable in terms of any free variables.}
\item{Write \(\mathbf{x}\) as a vector whose entries depend on the free
variables.}
\item{Decompose \(\mathbf{x}\) into a linear combination of vectors.}
\end{enumerate}

\subsection*{Solved problem}
Write the general solution of \( 10 x_1 - 3 x_2 - 2 x_3 = 7\)
in parametric vector form.
\[ \left[ \begin{array}{cccc}
10 & -3 & -2 & 7 \end{array} \right] \sim
\left[ \begin{array}{cccc}
1 & -.3 & -.2 & .7 \end{array} \right] \]
    \[ x_1 = .7 + .3x_2 + .2x_3 \]
  \[ \mathbf{x} = \left[ \begin{array}{c} .7 \\ 0 \\ 0 \end{array} \right]
+ x_2 \left[ \begin{array}{c} .3 \\ 1 \\ 0 \end{array} \right]
+ x_3 \left[ \begin{array}{c} .2 \\ 0 \\ 1 \end{array} \right] \]

\section{Applications of linear systems}
In this section, it is shown how linear systems with multiple solutions can
arise naturally.
\subsection{Leontief model}
Also known as the Leontief ``production'' model.
If one knows the total output of a sector for a certain period of time and how
it is
divided among other sectors, then it is proven that
\begin{quote}
There exist equilibrium prices that can be assigned to the total outputs of the
various sectors in such a way that the income of each sector exactly balances
its
expenses.
\end{quote}

Suppose the following model is a decent representation of an economic.
\begin{center}
\begin{tabular}{| c c c | l |}
\hline
Coal & Electric & Steel & Purchased by \\
\hline
.0 & .4 & .6 & Coal \\
.6 & .1 & .2 & Electric \\
.4 & .5 & .2 & Steel \\
\hline
\end{tabular}
\end{center}

Then it is known that the equilibrium price of coal \(p_C = .4p_E + .6p_S\).
Therefore, \(p_C - .4p_E - .6p_S = 0\). Similar equations can be obtained from
the other two lines. At the end of the process, the linear system is

\[
\begin{bmatrix}
1   & -.4 & -.6 & 0 \\
-.6 &  .9 & -.2 & 0 \\
-.4 & -.5 &  .8 & 0
\end{bmatrix}
\]

By solving this system, it is known that

\[
p = \begin{bmatrix} p_C \\ p_E \\ p_S \end{bmatrix}
= \begin{bmatrix} .94 p_S \\ .85 p_S \\ p_S \end{bmatrix}
\]

Any (nonnegative) choice for \(p_S\) results in correct equilibrium prices.

\subsection{Balancing chemical equations}
Chemical equations describe the consumption of reactants and the formation
of products in chemical reactions.
Simple linear systems may be used to balance chemical reactions.
The burning of butanol is represented by:
\[
\left( x_1 \right) \text{C}_4\text{H}_{10}\text{O} +
\left( x_2 \right) \text{O}_2 \rightarrow
\left( x_3 \right) \text{CO}_2 +
\left( x_4 \right) \text{H}_2\text{O}
\]
In order to balance this reaction,
one must find the coefficients that make both sides have the same amount of
carbon,
hydrogen and oxygen.
This problem can be rewritten as:
\[
x_1 \begin{bmatrix} 4 \\ 10 \\  1\end{bmatrix} +
x_2 \begin{bmatrix} 0 \\  0 \\  2\end{bmatrix} +
x_3 \begin{bmatrix}-1 \\  0 \\ -2\end{bmatrix} +
x_4 \begin{bmatrix} 0 \\ -2 \\ -1\end{bmatrix} =
\begin{bmatrix}0 \\ 0 \\ 0\end{bmatrix}
\]
Row reduction of the corresponding augmented matrix gives us
\[
\textbf{p} = \begin{bmatrix}.2x_4 \\ 1.2x_4 \\ .8x_4 \\ x_4\end{bmatrix}
\]
The smallest selection of \(x_4\) that makes all coefficients integers is \(5\).
This makes
\[
  \text{C}_4\text{H}_{10}\text{O} +
6 \text{O}_2 \rightarrow
4 \text{CO}_2 +
5 \text{H}_2\text{O}
\]
a balanced chemical reaction.

\subsection{Network flow}
Systems of linear equations arise when scientists study the flow of something
through a network.
For instance, traffic engineers monitor the pattern of traffic flow in a grid of
city streets.
Electrical engineers calculate current flow through circuits.
And economists analyze the distribution of products from manufacturers to
consumers.
A network consists of a set of points (called junctions or nodes),
with lines or arcs called branches connecting some or all of the junctions.
The direction of flow in each branch is indicated,
and the flow amount (rate) is either shown or is denoted by a variable.
The basic assumption of network flow is that the total flow into the network
equals
the total flow out of the network and that the total flow into a junction equals
the total
flow out of the junction.
In a similar fashion, the flow at each junction is described by a linear
equation. The
problem of network analysis is to determine the flow in each branch when partial
information (such as the flow into and out of the network) is known.

\subsection{Solved exercises}
\subsubsection{Introduction}
This exercises are from the fourth edition of Linear Algebra and its
Applications.
\subsubsection{Leontief model}
\paragraph{1)}
An economy has four sectors: Agriculture, Manufacturing, Services, and
Transportation.
Agriculture sells 20\% of its output to Manufacturing, 30\% to Services, 30\% to
Transportation, and retains the rest.
Manufacturing sells 35\% of its output to Agriculture, 35\% to Services, 20\% to
Transportation, and retains the rest.
Services sells 10\% of its output to Agriculture, 20\% to Manufacturing, 20\% to
Transportation, and retains the rest.
Transportation sells 20\% of its output to Agriculture, 30\% to Manufacturing,
20\% to Services, and retains the rest.

\begin{enumerate}
\item Construct the exchange table for this economy.
\item Find a set of equilibrium prices for the economy if the value of
  Transportation is \(\$10.00\) per unit.
\item {The Services sector launches a successful ``eat farm fresh'' campaign,
       and increases its share of the output from the Agricultural sector to
40\%,
       whereas the share of Agricultural production going to Manufacturing falls
to 10\%.
       Construct the exchange table for this new economy.}
\item {Find a set of equilibrium prices for this new economy if the value of
    Transportation is still \(\$20.00\) per unit.
       What effect has the ``eat farm fresh'' campaign had on the equilibrium
prices for the sectors in this economy?}
\end{enumerate}

\subparagraph{Solution}

\begin{enumerate}
  \item {
  \[ \begin{bmatrix}
.2 & .35 & .1 & .2 \\
.2 &  .1 & .2 & .3 \\
.3 & .35 & .5 & .2 \\
.3 &  .2 & .2 & .3
      \end{bmatrix} \]}
  \item{\(p_A = 7.99\), \(p_M = 8.36\), \(p_S = 14.65\), and \(p_T = 10.00\).}
  \item {\[ \begin{bmatrix}
.2 & .35 & .1 & .2 \\
.1 &  .1 & .2 & .3 \\
.4 & .35 & .5 & .2 \\
.3 &  .2 & .2 & .3
            \end{bmatrix} \]}
  \item{\(p_A = 7.81\), \(p_M = 7.67\), \(p_S = 15.62\), and \(p_T = 10.00\).}
  \item{Therefore, the campaign has benefited Services.}
\end{enumerate}

\section{Matrices}
\subsection{Properties of the determinant}
\begin{enumerate}
  \item{\(\det(I)=1\).}
  \item{\(\det(A)=\det(A^{T})\).}
  \item{If \(B\) is \(A\) with a row multiplied by \(k\),
      then \(\det(B)=k\det(A)\).}
  \item{If \(B\) is \(A\) with two rows swapped, then \(\det(B)=-\det(A)\).}
  \item{If two or more rows of \(A\) are identical, then \(\det(A)=0\).}
  \item{If the elements above or below the diagonal of \(A\) are \(0\), then
      \(\det(A)=\prod_{i=1}^{m}{A_{i,i}}\).}
  \item{If the elements of \(A\), \(B\), and \(C\) are equal,
      except for one row of C that is equal to the sum of the two corresponding
      rows of \(A\) e \(B\), then
      \(\det{\left(C\right)}=\det{\left(A\right)}+\det{\left(B\right)}\).}
  \item{For square matrices \(A\) and \(B\) of equal size,
      \(\det{\left(AB\right)}=\det{\left(A\right)}\det{\left(B\right)}\).}
  \item{If \(B\) is \(A\) with one row multiplied by a nonzero constant added
      to a parallel row, then then \(\det(A)=\det(B)\).}
  \item{\(\det{\left(A^{-1}\right)}=\frac{1}{\det{\left(A\right)}}\).}
\end{enumerate}

\subsection{Inverse matrix}

\begin{proof}
The inverse matrix is unique.

Let \(B\) and \(C\) be the inverse matrices of \(A\).
\[B = BI = B(AC) = (BA)C = IC = C\]
\end{proof}

\subsubsection{Inverse matrix by Gauss-Jordan}
\[ \left[\mathrm{A} \mid \mathrm{I} \right] \rightarrow
\left[\mathrm{I} \mid \mathrm{A} ^ {-1} \right] \]

The adjoint matrix is the transposed of the cofactor matrix.
\[A^{-1} = \frac{\mathrm{adj}(A)}{\mathrm{D}} =
\frac{(\mathrm{cof}(A))^{T}}{\mathrm{D}}\]

\subsection{Singular matrix}
A square matrix that does not have a matrix inverse. A matrix is singular if,
and only if, its determinant is 0.


\chapter{Series}

\section{Arithmetic series}
An arithmetic series is the sum of a sequence in which each term is computed
from the previous one by adding (or subtracting) a constant.
\[a_n = a_1 + (n-1)r\]
\[S_{p..q} = \frac{(q - p + 1)(a_q + a_p)}{2}\]
Note that this expression is just the product of the number of terms by the
average value.

\section{Geometric series}
\[a_n = a_1 q^{(n-1)}\]
\[S_n = a_1 \frac{q^n - 1}{q-1}\]

\chapter{Complex numbers}

\section{Notation}
\[\cis \left ( \argument \right ) =  \cos \left ( \argument \right ) + i \sin
\left ( \argument \right )\]

\section{Formulas}
\[a + bi = r \left( \cos \left ( \argument \right ) + i \sin \left ( \argument
\right ) \right )
= r \cis \left ( \argument \right )\]
\[\conj{z} = a - bi = r \cis \left (- \argument \right)\]
\[r = \sqrt{a^2 + b^2}\]
\[\phi = \tan^{-1} \left ( \frac{b}{a} \right)\]

\[z_1 z_2 = r_1 r_2 \left ( \cis \left ( \phi_1 + \phi_2 \right ) \right )\]
\[\frac{z_1}{z_2} = \frac{r_1}{r_2} \left ( \cis \left ( \phi_1 - \phi_2 \right
) \right )\]
\[z^n = r^n \cis \left ( n \argument \right )\]
\[z^{\reciprocal{n}} = r^{\reciprocal{n}} \cis \left ( \frac{\argument + 2 \pi
k}{n} \right ), \quad
k : k \in \integers \text{ and } 0 \le k \le n - 1\]

Euler's Formula
\[e^{ix} = \cis \left ( x \right)\]

\chapter{Logarithms}

\paragraph{Logarithm.} The logarithm is the inverse operation to exponentiation.
The natural logarithm of \(t\) equals the integral of \(x^{-1}\) in respect to x
from \(1\) to \(t\).

\section{Definition}

\[y = \log_a x \iff a^y = x, \quad a > 0, a \ne 0\]
\[\log_a 0 = \begin{cases} -\infty, \quad a > 1 \\ +\infty, \quad a < 1
\end{cases}\]
\[\log x y = \log x + \log y\]
\[\log \frac{x}{y} = \log x - \log y\]
\[\log x^n = n \log x\]
\[\log_a b = \frac{\log_c b}{\log_c a} = \left ( \log_a c \right ) \left (
\log_c b \right )\]
\[\log a_b = \reciprocal{\log_b a}\]
\[e=\lim_{k\to\infty} \left ( 1 + \reciprocal{k} \right ) ^ k\]

\chapter{Statistics}

\section{Discrete distributions}

\subsection{Geometric distribution}
\subsubsection*{Probability mass function}
\[P(X = k) = (1 - p)^{k - 1}p\]
\subsubsection*{Tail probabilities function}
\[P(X \ge k) = (1 - p)^{k - 1}\]
This probability distribution has mean \(\frac{1}{p}\) and variance \(\frac{1 - p}{p^2}\).

\paragraph{Problem.}
Suppose that the probability of an item on an assembly
line being defective is \(p = 0.02\). What is the average number of items
inspected before finding the first defective item?
\paragraph{Solution.}
\[\frac{1}{p} = \frac{1}{0.02} = 50\]

\paragraph{Problem.}
What is the probability that none of the first ten sampled
items are not defective?
\paragraph{Solution.}
\[P(X \ge 11) = (1 - p)^{10} = 0.98^{10} \approx 0.817\]

\subsection{Poisson distribution}
\subsubsection*{Probability mass function}
\[P(X = k) = e^{-\lambda}\frac{\lambda^k}{k!}\]

\paragraph{Problem.}
This probability distribution has mean \(\lambda\) and variance \(\lambda\).
Suppose that the number of creatures of a given species that we expect to find
in a one square meter follows the Poisson(5) distribution. What is the
probability of finding exactly 7 creatures of this species?
\paragraph{Solution.}
\[P(X = 7) = e^{-5}\frac{5^7}{7!} = e^{-5}\frac{78125}{5040} \approx 0.104\]

\paragraph{Problem.}
For a Poisson(\(\lambda\)) distribution, suppose that the probability
attached to 0 is 0.02949. Determine \(\lambda\).
\paragraph{Solution.}
\begin{align*}
P(X = 0) = e^{-\lambda}\frac{\lambda^0}{0!} &= e^{-\lambda} = 0.02949 \\
& \therefore -\lambda = \ln \left(0.02949\right)\\
& \therefore \lambda \approx 3.524
\end{align*}

\section{Linear relationship}
A linear relationship between \(y\) and \(x\) is denoted by:
\[\mu_{y | x} = \beta_0 + \beta_1 x + \epsilon\]
where
\begin{itemize}
  \item[\(\mu_{y | x}\)] is the true mean of y for a given value of x
  \item[\(\beta_0 + \beta_1 x\)] is a line
  \item[\(\epsilon\)] is a random error
\end{itemize}

The estimated relation line:
\[\hat y = \hat {\beta_0} + \hat {\beta_1} x\]

\section{Pythagorean means}
The three classical Pythagorean means are the arithmetic mean (A), the
geometric mean (G), and the harmonic mean (H). They are defined by:
\[A = \frac{\sum{x}}{n}\]
\[G = \left( \prod{x} \right) ^ \reciprocal{n}\]
\[H = \frac{n}{\sum{\reciprocal{x}}}\]

If all \(x\) are positive, the following relation holds
\[min \le H \le G \le A \le max\]

\section{Measures of statistical dispersion}
Variance
\[\sigma^2 = \sum \frac{\left ( k-\mean{x} \right ) ^ 2}{n}\]
Standard Deviation
\[\sigma = \sqrt{\sum \frac{\left ( k-\mean{x} \right ) ^ 2}{n}}\]

\section{Normal distribution}
The normal distribution is a common continuous probability distribution denoted
by \(N(\mu, \sigma)\). \(\mu\) is the mean of the distribution (and also its
median and mode) and \(\sigma\) is its standard deviation.

If \(\mu = 0\) and \(\sigma = 1\), the distribution is called the
\textbf{standard normal distribution}.

\chapter{Geometry}

\section{Trigonometry}

For a right triangle with sides a and b, hypotenuse c
\[\sin{\alpha} = \frac{a}{c}\]
\[\cos{\alpha} = \frac{b}{c}\]
\[\tan{\alpha} = \frac{a}{b}\]
\[\csc{\alpha} = \reciprocal{\sin{\alpha}} = \frac{c}{a}\]
\[\sec{\alpha} = \reciprocal{\cos{\alpha}} = \frac{c}{b}\]
\[\cot{\alpha} = \reciprocal{\tan{\alpha}} = \frac{b}{a}\]

Sums and differences of sines, cosines, and tangents
\[{\sin{\left( \alpha \pm \beta \right)} =
  \sin{\alpha}\cos{\beta} \pm \sin{\beta}\cos{\alpha}}\]
\[{\cos{\left( \alpha \pm \beta \right)} =
  \cos{\alpha}\cos{\beta} \mp \sin{\alpha}\sin{\beta}}\]
\[{\tan{\left( \alpha \pm \beta \right)} =
  \frac{\tan{\alpha} \pm \tan{\beta}}{1 \mp \tan{\alpha} \tan{\beta}}}\]

\section{Right triangle}
For a right triangle with sides a and b, hypotenuse c, projections m and n (of
a and b, respectively), and height h,
the following expressions are true

\[a^2 = m c\]
\[b^2 = n c\]
\[h^2 = m n\]
\[a b = c h\]

\section{Equilateral triangle}
\[h = \frac{a \sqrt{3}}{2}\]
\[r = \frac{a \sqrt{3}}{6}\]
\[R = \frac{a \sqrt{3}}{3}\]
\[A = \frac{a^2 \sqrt{3}}{4}\]

\section{All triangles}
\[A = a b \sin \gamma \]
\[A = p r\]
\[A = \sqrt{p \left ( p - a \right ) \left ( p - b \right ) \left ( p - c
\right )}\]

where

\begin{itemize}
  \item[\(p\)] is the semiperimeter;
  \item[\(r\)] is the inradius (the radius of the inscribed circle).
\end{itemize}

\paragraph{Median.} In geometry, a median of a triangle is a line segment
joining a vertex to the midpoint of the opposing side. Every triangle has
exactly three medians, one from each vertex. In the case of isosceles and
equilateral triangles, a median bisects any angle at a vertex whose two adjacent
sides are equal in length.

\paragraph{Relation to center of mass.} Each median of a triangle passes through
the triangle's centroid, which is the center of mass of an object of uniform
density in the shape of the triangle. Thus the object would balance on the
intersection point of the medians.

\paragraph{Each median divides the area of the triangle in half.}

\section{Law of sines}
\[\frac{a}{\sin{A}} = \frac{b}{\sin{B}} = \frac{c}{\sin{C}} = 2R\]
where \(a\), \(b\), and \(c\) are the lengths of the sides of a triangle, and
\(A\), \(B\), and \(C\) are the opposite angles, and \(R\) is the radius of
the triangle's circumcircle.

\section{Law of cosines}
\[a^2 = b^2 + c^2 - 2bc\cos{A}\]

\section{Quadrilateral}
\[A = \frac{d_1 d_2 \sin{\phi}}{2}\]

where

\begin{itemize}
  \item[\(d\)] is a diagonal;
  \item[\(\phi\)] is the angle between the diagonals.
\end{itemize}

\section{Regular hexagon}

\[r = m = \frac{l \sqrt{3}}{2}\]
\[A = pr = 3 l r = \frac{3 l^2 \sqrt{3}}{2}\]

\section{Circle}
\paragraph{Intersecting Chord Theorem.} When two chords intersect each
other inside a circle, the products of their segments are equal.
\[a_1 a_2 = b_1 b_2\]

\section{Ellipse}
In mathematics, an ellipse is a curve on a plane that surrounds two focal points
such that the sum of the distances to the two focal points is constant for every
point on the curve.

An ellipse with center \(C \left( x_0, y_0 \right)\) is represented by
\[\frac{\left(x - x_0\right)^2}{a^2}+\frac{\left(y - y_0\right)^2}{b^2}=1\]
or
\[\frac{\left(x - x_0\right)^2}{b^2}+\frac{\left(y - y_0\right)^2}{a^2}=1\]
\subsection{Focus}
The focal distance \(c\) is given by the Pythagorean theorem:

\[a^2=b^2+c^2\]

\subsection{Area}
The area of an ellipse is:

\[A = \pi a b\]

\subsection{Eccentricity}
The eccentricity of an ellipse, usually denoted by \(\epsilon\), is the ratio of
the distance between the two foci, to the length of the major axis:

\[\epsilon = \frac{2f}{2a} = \frac{f}{a}\]

\section{Pyramids}
\[V = \frac{bh}{3}\]

\chapter{Equations}
\section{Discriminant}
\[\Delta = b^2 - 4ac\]

\section{Vieta's formulas}
A polynomial \(P(x) = a_n x^n + a_{n-1} x^{n-1} + ... + a_0\), (with the
coefficients being real or complex numbers and \(a_n \neq 0\)) is known by the
fundamental theorem of algebra to have \(n\) (not necessarily distinct) complex
roots \(x_1, x_2, ..., x_n\).

Vieta's formulas relate the polynomial's coefficients \(a_k\) to signed sums
and products of its roots \(x_i\) as follows:

\[\sum_{1 \le i \le n} x_i = - \frac{a_{n-1}}{a_n}\]
\[\sum_{1 \le i_1 < i_2 \le n} x_{i_1} x_{i_2} = \frac{a_{n-2}}{a_n}\]
\[\sum_{1 \le i_1 < i_2 < i_3 \le n} x_{i_1} x_{i_2} x_{i_3} = -
\frac{a_{n-3}}{a_n}\]
\[\sum_{1 \le i_1 < i_2 < ... < i_k \le n} x_{i_1} x_{i_2} ... x_{i_k} = (-1)^k
\frac{a_{n-k}}{a_n}\]

\chapter{Calculus}
\section{Limits}
\subsection{Limits with multiple variables}
If the function is continuous where you are trying to find the limit, simply
plug in the variables. If this is not possible, the squeeze theorem might be a
better solution. Lastly, you should try to prove that the limit does not exist.

When proving that the limit of a function of one variable does not exist, you
would test if the limits from the right and from the left were different.
When dealing with functions of multiple variables, if the limits along any two
different smooth curves are different, the limit you are trying to find does
not exist. Usually, \(x = 0\), \(y = 0\) and \(x = y\) are good choices when
proving that a limit does not exist.

\subsection{Limits with multiple variables exercises}

\paragraph{Problem.}
Show that the following limit does not exist.
\[\lim_{\left(x, y\right) \rightarrow \left(0, 0\right)} \frac{x + y}{2x^2 + y^2}\]
\paragraph{Solution.}
We look at the limit as \(y \rightarrow 0\) by the smooth curve \(x = 0\).
\[\lim_{y \rightarrow 0} \frac{x + y}{2x^2 + y^2}
= \lim_{y \rightarrow 0} \frac{y}{y^2}
= \lim_{y \rightarrow 0} \frac{1}{y} = +\infty\]
Therefore, the limit does not exist.

\paragraph{Problem.}
Evaluate the following limit.
\[\lim_{\left(x, y\right) \rightarrow \left(0, 0\right)} \frac{\sin \left(x^2 + y^2\right)}{x^2 + y^2}\]
\paragraph{Solution.}
Let \(z = x^2 + y^2\), then
\[\lim_{\left(x, y\right) \rightarrow \left(0, 0\right)} \frac{\sin \left(x^2 + y^2\right)}{x^2 + y^2}
= \lim_{z \rightarrow 0^+} \frac{\sin \left(z\right)}{z}
= 1\]
by the squeeze theorem or by l'Hôpital's rule.

\paragraph{Problem.}
Evaluate the following limit.
\[\lim_{\left(x, y\right) \rightarrow \left(0, 0\right)} e^{-1/\left(x^2 + y^2\right)}\]
\paragraph{Solution.}
Let \(z = x^2 + y^2\), then
\[\lim_{\left(x, y\right) \rightarrow \left(0, 0\right)} e^{-1/\left(x^2 + y^2\right)}
= \lim_{z \rightarrow 0^+} e^{-z^{-1}}\]
Because \[\lim_{z \rightarrow 0^+} -z^{-1} = -\infty\]
we know that \[\lim_{z \rightarrow 0^+} e^{-z^{-1}} = \lim_{x \rightarrow -\infty} e^{x} = 0\]

\paragraph{Problem.}
Determine if the following limit exists. If so, find its value.
\[\lim_{\left(x, y\right) \rightarrow \left(0, 0\right)} \frac{x^4 - y^4}{x^2 + y^2}\]
\paragraph{Solution.}
First we simplify the expression.
\[\frac{x^4 - y^4}{x^2 + y^2} = \frac{\left(x^2 - y^2\right) \left(x^2 + y^2\right)}{x^2 + y^2} = x^2 - y^2\]
Then we find the limit of the simplified expression. Clearly, this limit does
exist because \(x^2 - y^2\) is continuous everywhere.
\[\lim_{\left(x, y\right) \rightarrow \left(0, 0\right)}{\frac{x^4 - y^4}{x^2 + y^2}}
= \lim_{\left(x, y\right) \rightarrow \left(0, 0\right)} x^2 - y^2 = 0\]

\section{Derivatives}
\[\frac{\dif}{\dif x} \sin x = \cos x\]
\[\frac{\dif}{\dif x} \cos x = -\sin x\]

\subsection{Identities}
\[\frac{\dif}{\dif x} \ln x = \reciprocal{x}\]
\textbf{Chain Rule}
\[\left\{f\left[g\left(x\right)\right]\right\}'
= f'\left[g\left(x\right)\right] g'\left(x\right)\]

\subsection{Partial derivatives}
A partial derivative is a derivative of a function of two or more variables
with respect to a single variable while the others are treated as constants.
The partial derivative of a function \(f\) with respect to \(x\) is indicated by
\(\frac{\partial f}{\partial x}\).

Some authors call \(\frac{\partial f}{\partial x}\left(x_0, y_0\right)\) the
slope of the surface in the x-direction at \(\left(x_0, y_0\right)\).
Similarly, \(\frac{\partial f}{\partial y}\left(x_0, y_0\right)\) is the slope
of the surface in the y-direction at \(\left(x_0, y_0\right)\).

\paragraph{Problem.}
Find the slope of the surface \(f(x, y) = x^{3}y^{2} + 5y\) in the y-direction at the point \((1, -2)\).
\paragraph{Solution.}
First, we differentiate with respect to \(y\) to find an expression for the slope we are interested in.
\[\frac{\partial f}{\partial y} = 2x^{3} + 5\]
Then we evaluate the expression at the point of interest.
\[\frac{\partial f}{\partial y}\left(1, -2\right) = 2 + 5 = 7\]
Therefore, the slope of the surface \(f(x, y) = x^{3}y^{2} + 5y\) in the y-direction at the point \((1, -2)\) is 7.

\subsubsection{Higher-Order Partial Derivatives}
The partial derivatives of partial derivatives are called second-order partial
derivatives. The second-order derivatives for a function \(f\left(x, y\right)\)
are
\[\frac{\partial^2 f}{\partial x \partial x} = f_{xx},
\quad \frac{\partial^2 f}{\partial x \partial y} = f_{yx},
\quad \frac{\partial^2 f}{\partial y \partial x} = f_{xy},
\quad \frac{\partial^2 f}{\partial y \partial y} = f_{yy}\]
Notice how these notations have different conventions for the order of
differentiation. The \(\partial\) notation being evaluated from right to left
and the subscript notation being evaluated from left to right.

The second-order partials \(f_{xy}\) and \(f_{yx}\) are called mixed partials.

\begin{theorem}
    Let \(f\) be a function of two variables. If \(f_{xy}\) and \(f_{yx}\) are
    continuous on some open disk, then \(f_{xy} = f_{yx}\) on that disk.
\end{theorem}

\paragraph{Problem.} Let \(f\left(x, y\right) = x^2 e^x e^y + xy\). Find \(f_{xxy}\).
\paragraph{Solution.}
\begin{align*}
    &\frac{\partial^3}{\partial y \partial x \partial x} \left(x^2 e^x e^y + xy\right) \\
    &=\frac{\partial^2}{\partial y \partial x} \left(\frac{\partial}{\partial x} \left(x^2 e^x e^y + xy\right)\right) \\
    &=\frac{\partial^2}{\partial y \partial x} \left(2x e^x e^y + x^2 e^x e^y + y\right) \\
    &=\frac{\partial}{\partial y} \left(\frac{\partial}{\partial x} \left(2x e^x e^y + x^2 e^x e^y + y\right)\right) \\
    &=\frac{\partial}{\partial y} \left(\frac{\partial}{\partial x} \left(\left(2x + x^2\right) e^x e^y\right)\right) \\
    &=\frac{\partial}{\partial y} \left(\left(2x + x^2\right) e^x e^y + \left(2 + 2x\right) e^x e^y\right) \\
    &=\frac{\partial}{\partial y} \left(\left(x^2 + 4x + 2\right) e^x e^y\right) \\
    &= \left(x^2 + 4x + 2\right) e^x e^y
\end{align*}

\subsubsection{Local Linear Approximations}
For a function \(f\left(x, y\right)\) We call
\[L\left(x, y\right) = f\left(x_0, y_0\right) + f_x\left(x_0, y_0\right)\left(x - x_0\right) + f_y\left(x_0, y_0\right)\left(y - y_0\right)\]
the local linear approximation of \(f\) at \(\left(x_0, y_0\right)\).

\subsubsection{Chain Rule for Partial Derivatives}
For a function \(z\left(x, y\right)\), where \(x = x\left(u, v\right)\) and \(y = y\left(u, v\right)\).
\[\frac{\partial z}{\partial u} = \frac{\partial z}{\partial x}\frac{\partial x}{\partial u} + \frac{\partial z}{\partial y}\frac{\partial y}{\partial u}\]

Similar formulas may be derived for functions of three or more variables.

\paragraph{Problem.} Let
\[w = e^{xyz}, \quad x = 3u + v, \quad y = 3u - v, \quad z = u^2v.\]
Use the chain rule to find \(\frac{\partial w}{\partial u}\). \cite{anton-bivens-davis}
\paragraph{Solution.}
\begin{align*}
    \frac{\partial w}{\partial u}
    &= \frac{\partial w}{\partial x}\frac{\partial x}{\partial u}
    + \frac{\partial w}{\partial y}\frac{\partial y}{\partial u}
    + \frac{\partial w}{\partial z}\frac{\partial z}{\partial u} \\
    &= 3 yz e^{xyz} + 3 xz e^{xyz} + 2 xyuv e^{xyz} \\
    &= e^{xyz} \left(3 yz + 3 xz + 2 xyuv\right)
\end{align*}

\paragraph{Problem.} Let
\[w = x^2 + y^2 - z^2, \quad x = \rho \sin \phi \cos \theta, \quad y = \rho \sin \phi \sin \theta, \quad z = \rho \cos \phi.\]
Use the chain rule to find \(\frac{\partial w}{\partial \rho}\). \cite{anton-bivens-davis}
\paragraph{Solution.}
\begin{align*}
    \frac{\partial w}{\partial \rho}
    &= \frac{\partial w}{\partial x}\frac{\partial x}{\partial \rho}
    + \frac{\partial w}{\partial y}\frac{\partial y}{\partial \rho}
    + \frac{\partial w}{\partial z}\frac{\partial z}{\partial \rho} \\
    &= 2 x \sin \phi \cos \theta
    + 2 y \sin \phi \sin \theta
    - 2 z \cos \phi \\
    &= 2 \rho \sin ^2 \phi \cos ^2 \theta
    + 2 \rho \sin ^2 \phi \sin ^2 \theta
    - 2 \rho \cos ^2 \phi \\
    &= 2 \left( \rho \sin ^2 \phi \cos ^2 \theta + \rho \sin ^2 \phi \sin ^2 \theta - \rho \cos ^2 \phi \right) \\
    &= 2 \left( \left( \rho \sin ^2 \phi \right) \left( \cos^2 \theta + \sin ^2 \theta \right) - \rho \cos ^2 \phi \right) \\
    &= 2 \left( \rho \sin ^2 \phi - \rho \cos ^2 \phi \right) \\
    &= 2 \rho \left( \sin ^2 \phi - \cos ^2 \phi \right) \\
    &= - 2 \rho \cos 2 \phi
\end{align*}

\section{Series}
\section{Series for e}
\[e^x = \frac{x^0}{0!} + \frac{x^1}{1!} + \frac{x^2}{2!} + \frac{x^3}{3!} + \ldots\]

\subsection{Intuition behind this series}
The following demonstration should help one understand why the abovementioned
series converges to \(e\).

\begin{align*}
    \frac{\dif}{\dif x} e^x
    &= \frac{\dif}{\dif x} \left( \frac{x^0}{0!} + \frac{x^1}{1!} + \frac{x^2}{2!} + \frac{x^3}{3!} + \ldots \right) \\
    &= \frac{0 x^{-1}}{0!} + \frac{1 x^0}{1!} + \frac{2 x^1}{2!} + \frac{3 x^2}{3!} + \ldots \\
    &= \frac{x^0}{0!} + \frac{x^1}{1!} + \frac{x^2}{2!} + \ldots = e^x
\end{align*}

\subsection{Maclaurin series}
A Maclaurin series is a Taylor series expansion of a function about 0.

\[f\left(x\right) = f\left(0\right) + f'\left(0\right)x + f''\left(0\right)\frac{x^2}{2!} + f^{\left( 3 \right)}\left(0\right)\frac{x^3}{3!} + \ldots\]

\section{Indefinite integrals}
\subsection{Reversed chain rule}
\paragraph{Examples}
\[\int \tan x \dif x = \int \frac{\sin{x}}{\cos{x}} \dif x\]
Letting \(f(x) = \cos x\),
\[\int \frac{\sin{x}}{\cos{x}} \dif x = - \int \frac{f'(x)}{f(x)} \dif x
= - \ln{f(x)} + C = - \ln{\cos x} + C\]
Note that, in this case, \(g'(x) = x^{-1}\), and that the integral of the
reciprocal function is the natural logarithm function.

\subsection{Substitution}\label{substitution}
\paragraph{Examples}
\[\int \cos^3 x \dif x
= \int \left( 1 - \sin^2 x \right) \cos x \dif x
= \int \cos x \dif x - \int \sin^2 x \cos x \dif x\]
\[\int \cos x \dif x = \sin x + C\]
Let \(u = \sin x\), therefore \(\dif u = \cos x \dif x\).
\[\int \sin^2 x \cos x \dif x = \int u^2 \dif u = \frac{\sin^3 x}{3} + C\]
\[\int \cos x \dif x - \int \sin^2 x \cos x \dif x
= \sin x + \frac{\sin^3 x}{3} + C\]

\subsection{Trigonometric substitutions}
Some integrals require the substitution of a variable by an expression. This is
the opposite of what is done in \ref{substitution}, on which an expression is
replaced by a variable.

The following table summarizes the most effective trigonometric substitutions
and their intervals. The interval restrictions are important to ensure that the
function which defines the substitution is one-to-one. \cite{stewart}

\begin{center}
    % 2 is the default, but here we want more spacing.
    \renewcommand{\arraystretch}{2}
    \begin{tabular}{ |c|c|c| }
        \hline
        Expression & Substitution & Interval \\
        \hline
        \(\sqrt{a^2 - x^2}\)
          & \(x = a\sin\theta\)
          & \(-\frac{\pi}{2} \le \theta \le \frac{\pi}{2}\) \\
        \hline
        \(\sqrt{a^2 + x^2}\)
          & \(x = a\tan\theta\)
          & \(-\frac{\pi}{2} < \theta < \frac{\pi}{2}\) \\
        \hline
        \(\sqrt{x^2 - a^2}\)
          & \(x = a\sec\theta\)
          & \(0 \le \theta < \frac{\pi}{2} \lor \pi \le \theta < \frac{3\pi}{2}\) \\
        \hline
    \end{tabular}
\end{center}

\paragraph{Example}
Find the area enclosed by an ellipse of the form
\[\frac{x^2}{a^2} + \frac{y^2}{b^2} = 1\]

Isolating \(y\) gives
\[y = \pm \frac{b}{a} \sqrt{a^2 - x^2}\]

The area of the ellipse on the first quadrant is given by
\[\int_{0}^{a} \frac{b}{a} \sqrt{a^2 - x^2} \dif x\]

This is one fourth of the total area of the ellipse, therefore
\[A = 4 \int_{0}^{a} \frac{b}{a} \sqrt{a^2 - x^2} \dif x\]

To solve the integral, let \(x = a\sin\theta\) and, consequently, \(\dif x = a
\cos \theta \dif \theta\). It is made simpler by changing the integration
limits. When \(x = 0\), \(\sin x = 0\), thus \(\theta = 0\). When \(x = a\),
\(\sin \theta = 1\), thus \(\theta = \pi / 2\).

\begin{align*}
    4 \int_{0}^{\frac{\pi}{2}} \frac{b}{a} \sqrt{a^2 - x^2} \dif x
    &= \frac{4b}{a} \int_{0}^{\frac{\pi}{2}} \sqrt{a^2 - a^2 \sin^2 \theta} a \cos \theta \dif \theta \\
    &= 4ab \int_{0}^{\frac{\pi}{2}} \sqrt{1 - \sin^2 \theta} \cos \theta \dif \theta \\
    &= 4ab \int_{0}^{\frac{\pi}{2}} \sqrt{\cos^2 \theta} \cos \theta \dif \theta \\
    &= 4ab \int_{0}^{\frac{\pi}{2}} \abs{\cos \theta} \cos \theta \dif \theta \\
    &= 4ab \int_{0}^{\frac{\pi}{2}} \cos^2 \theta \dif \theta \\
    &= 2ab \int_{0}^{\frac{\pi}{2}} 1 + \cos {2 \theta} \dif \theta \\
    &= 2ab \left[ \theta + \frac{1}{2} \sin {2 \theta} \right]_{0}^{\frac{\pi}{2}} \\
    &= 2ab \left(\frac{\pi}{2} + 0 - 0 - 0\right) \\
    &= \pi a b
\end{align*}

Which is the formula for the area of an ellipse. Furthermore, it is also the
formula for the area of a circle as a circle is an ellipse with \(a = b\).

\section{Definite integrals}
\subsection{Multiple integrals}
\paragraph{Problem.} Simplify
\[\iint_D {\left(2x - y\right) \dif A}\]
where D is bounded by the circle with center at the origin and radius 2.
\paragraph{Solution.} We rewrite the double integral as an iterated integral.
If \(x\) ranges from \(-2\) to \(2\), and \(y\), as a function of \(x\), is
bounded by \(-\sqrt{4 - x^2}\) and \(\sqrt{4 - x^2}\).
\begin{align*}
    &\int_{-2}^{2} \int_{-\sqrt{4 - x^2}}^{\sqrt{4 - x^2}} {\left(2x - y\right) \dif y} \dif x \\
    &= \int_{-2}^{2} \left[ 2xy - \frac{y^2}{2} \right]_{y = -\sqrt{4 - x^2}}^{y = \sqrt{4 - x^2}} \dif x \\
    &= \int_{-2}^{2} \left( 2x\sqrt{4 - x^2} - \frac{4 - x^2}{2} + 2x\sqrt{4 - x^2} + \frac{4 - x^2}{2} \right) \dif x \\
    &= \int_{-2}^{2} \left( 4x\sqrt{4 - x^2} \right) \dif x
\end{align*}
At this point the \(x = a\sin{t}\) trigonometric substitution is used.
\begin{align*}
    &\int_{-2}^{2} 4x\sqrt{4 - x^2} \dif x \\
    &=\int_{-\pi/2}^{\pi/2} 4 \left(a \sin{t}\right) \sqrt{a^2 - \left(a \sin{t}\right)^2} \dif t \\
    &=\int_{-\pi/2}^{\pi/2} 4 a \sin{t} \sqrt{a^2 - a^2\sin^2{t}} \dif t \\
    &=\int_{-\pi/2}^{\pi/2} 4 a^2 \sin{t} \sqrt{1 - \sin^2{t}} \dif t \\
    &=\int_{-\pi/2}^{\pi/2} 16 \sin{t} \cos{t} \dif t \\
    &=16 \left[ - \frac{\cos^2{t}}{2} \right]_{-\pi/2}^{\pi/2} \\
    &=16 \left( - \frac{\cos^2{\left(\frac{\pi}{2}\right)}}{2} + \frac{\cos^2{\left(-\frac{\pi}{2}\right)}}{2} \right) = 0
\end{align*}

\part{Computer science}

\chapter{Number representation}

\section{Fixed point}
Fixed point is a form of representing real numbers with a fixed number of digits
after the radix point.

\subsection{Fixed point conversion exercises}
\paragraph{Problem.}
Convert \texttt{01101011} and \texttt{11001100} from fixed
point notation with four bits for the integral part and four bits for the
fractional part to decimal first using unsigned arithmetic and then using two's
complement.
\paragraph{Solution.}
Using unsigned arithmetic,
\[0110.1011_{2} = 4_{10} + 2_{10} + 0.5_{10} + 0.125_{10} + 0.0625_{10}
  = 6.6875_{10}\]
\[1100.1100_{2} = 8_{10} + 4_{10} + 0.5_{10} + 0.25_{10} = 12.75_{10}\]

Using two's complement,
\[0110.1011_{2} = 4_{10} + 2_{10} + 0.5_{10} + 0.125_{10} + 0.0625_{10}
 = 6.6875_{10}\]
\[1100.1100_{2} = \left( 8_{10} + 4_{10} \right) - 16_{10} + 0.5_{10}
 + 0.25_{10} = -3.25_{10}\]

\paragraph{Problem.}
Evaluate the following expressions using 8-bit unsigned
fixed point arithmetic. The results should have 4 bits for the integral part and
4 bits for the fractional part. The results must be rounded if necessary.
Overflow and rounding must be indicated.

\begin{enumerate}
    \item \(0111.0110_{2} + 0010.0010_{2}\)
    \item \(1000.1001_{2} - 1001.1000_{2}\)
    \item \(11.101011_{2} + 001100.00_{2}\)
\end{enumerate}

\paragraph{Solution.}
\begin{enumerate}
    \item \(0111.0110_{2} + 0010.0010_{2} = 1001.1000_{2}\)
    \item \(1000.1001_{2} - 1001.1000_{2} = 0010.0001_{2}\) \textbf{(overflow)}
    \item \(11.101011_{2} + 001100.00_{2} = 1111.1011_{2}\) \textbf{(rounding)}
\end{enumerate}

\section{Floating Point}
Floating point is a form of representing real numbers while supporting a
trade-off between range and precision.

All exact values a floating point may assume are of the form
\[\text{significand} \cdot \text{base}^\text{exponent}\]
where significand, base, and exponent are integers and base is greater than or
equal to two.

\subsection{Usage}
Albeit more computationally expensive than fixed point arithmetic, floating
point arithmetic is more commonly used in modern times. The main reasons for
this is that the same floating point format is suitable for representing a wider
range of values than its fixed point counterpart.

Supercomputers are often compared in terms of FLOPS. FLOPS stands for
floating-point operations per second. It is a more accurate measure of computer
performance for computers which make heavy usage of floating-poing
operations.

\subsection{IEEE 754}
The IEEE 754 is the IEEE standard for floating-point arithmetic. It is a
technical standard for floating-point computation established in 1985.

The value of a single precision IEEE-754 number is given by
\[\text{sign} \cdot \text{significand} \cdot 2^\text{exponent}\]

\subsubsection{IEEE 754 Number Formats}
The standard defines five number formats, two of which are in wide usage:
binary32 and binary64.

The binary32 format defines 32-bit floating point numbers in base 2. These are
also known as \textbf{single precision floating point numbers}. This format
delegates one bit to the sign, 8 bits to the exponent and the remaining 23 bits
to the significand.

The binary64 format defines 64-bit floating point numbers in base 2. These are
also known as \textbf{double precision floating point numbers}. This format
delegates one bit to the sign, 11 bits to the exponent and the remaining 52 bits
to the significand.

\subsubsection{IEEE 754 Conversion Algorithm}
In order to convert the decimal representation of a real number to an IEEE 754
number the following algorithm may be used.
\begin{enumerate}
\item Set the first bit if the number is negative.
\item Find the biggest power of two which is less than or equal to the absolute
    value of the number and express it in the exponent bits biased by 127.
\item Express the fractional part of the quotient between the number whose
    representation is of interest and the abovementioned power of two in the
    significand bits.
\end{enumerate}

An algorithm for the conversion from the IEEE 754 format to decimal is not
described as it is much more obvious than the one required for the conversion
from decimal values to this floating point format.

\subsubsection{IEEE 754 Conversion Exercises}
\paragraph{Problem.}
Convert -7 to a single-precision IEEE 754 floating point number.
\paragraph{Solution.}
\begin{enumerate}
\item It is negative, therefore the first bit is set.
\item The biggest power of two less than or equal to the absolute value is
    \(2^2 = 4\). Therefore, the exponent should be \(127 + 2 = 129\).
\item Determine the significand: \(7 \div 4 = 1.75\).
\item This results in \singleprecision{11000001011000000000000000000000}.
\end{enumerate}

\paragraph{Problem.}
Convert 255 to a single-precision IEEE 754 floating point number.
\paragraph{Solution.}
\begin{enumerate}
\item It is positive, therefore the first bit is unset.
\item The biggest power of two less than or equal to the absolute value is
    \(2^7 = 128\). Therefore, the exponent should be \(127 + 7 = 134\).
\item Determine the significand: \(255 \div 128 = 1.9921875\).
\item This results in \singleprecision{01000011011111110000000000000000}.
\end{enumerate}

\paragraph{Problem.}
Convert \singleprecision{01000110110000000000000000000000} from IEEE 754 single
precision floating point to a decimal number.
\paragraph{Solution.}
\begin{enumerate}
\item The first bit is unset, therefore it is positive.
\item The exponent is \(141 - 127 = 14\).
\item The significand is \(1 + 2^{-1} = 1.5\).
\item This results in \(1.5 \times 2^{14} = 1.5 \times 16384 = 24576\).
\end{enumerate}

\paragraph{Problem.}
Convert \singleprecision{11001011010100000000000011000000} from IEEE 754 single
precision floating point to a decimal number.
\paragraph{Solution.}
\begin{enumerate}
\item The first bit is set, therefore it is negative.
\item The exponent is \(150 - 127 = 23\).
\item The significand is \(1 + 2^{-1} + 2^{-3} + 2^{-16} + 2^{-17} =
    1.62502288818359375\).
\item This results in \(-1.62502288818359375 \times 2^{23} = 13,631,680\).
\end{enumerate}

\textbf{Finding Representation Limits}

\textit{Find the largest positive number that can be represented with a single
precision IEE 754 floating point number.}

Straightforwardly enough, this number has the largest possible significand and
the largest possible exponent of a normalized value.

Therefore, this number is \singleprecision{01111111011111111111111111111111},
which in decimal is

\begin{align}
    &\left(1 + \sum_{i=1}^{23} 2^{-i}\right) \times 2^{127} \nonumber \\
    &= \frac{16777215}{8388608} \times 2^{127} \nonumber \\
    &= 340282346638528859811704183484516925440 \label{largest-positive-32} \\
    &\approx 3.403 \times 10^{38} \nonumber
\end{align}

\textit{Find the second largest positive number that can be represented with a
single precision IEEE 754 floating point number.}

This number is easily derived from the largest positive number, which is
\ref{largest-positive-32}. To obtain the first number smaller than the current
number, one should subtract one from the significand bits. However, if the
significand is 1.0, one should make the significand the biggest possible value
it may assume and decrement the exponent\footnote{Take the two options as
alternatives to obtain a number smaller than the largest positive representable
number. Decrementing the exponent will produce a number equal to the product of
\(0.5\) and the largest positive number. However, decrementing the significand
bits would produce a number approximately equal to the product of
\(0.999999881\) and largest positive number. This clearly demonstrates that the
sought after number is found by decrementing the significant bits.}.

Therefore, the second largest positive number that can be represented with a
single precision IEEE 754 floating point number is

% Could have used align*, but let us keep using align in case we need labels in
% the future.
\begin{align}
    \left(1 + \sum_{i=1}^{22} 2^{-i}\right) \times 2^{127}
    &= \frac{8388607}{4194304} \times 2^{127} \nonumber \\
    &= 340282326356119256160033759537265639424 \nonumber \\
    &\approx 3.403 \times 10^{38} \nonumber
\end{align}

This also shows that the difference between the largest possible number and the
second largest possible number is approximately \(2.03 \times 10^{31}\).

\textit{Find the smallest positive number that can be represented with a single
precision IEE 754 floating point number.}

This number is the product of the smallest positive significand by the power of
the base raised to the smallest normalized exponent.

Namely, this number is \singleprecision{00000000100000000000000000000000}, whose
decimal representation is

\begin{align}
    2^{-126}
    &= \frac{1}{85070591730234615865843651857942052864}
    \label{smallest-positive-32} \\
    &\approx 1.175 \times 10^{-38} \nonumber
\end{align}

\textit{Find the second smallest positive number that can be represented with a
single precision IEE 754 floating point number.}

The opposite of what was done to find the second largest positive number may be
done to find the second smallest positive number. Therefore, the significand is
made \(1 + 2^{-23}\) and the exponent is left unchanged.

\begin{align}
    &\left(1 + 2^{-23}\right) \times 2^{-126} \nonumber \\
    &= \frac{8388609}{713623846352979940529142984724747568191373312} \nonumber
    \\ &\approx 1.175 \times 10^{-38} \nonumber
\end{align}

This also shows that the difference between the smallest possible number and the
second smallest possible number is approximately \(1.401 \times 10^{-45}\).

\textit{Find the sum of the following floating point numbers.}
\begin{itemize}
    % Remove bullets
    \item[] \singleprecision{11000011010100000000000000000000}
    \item[] \singleprecision{01000110110000000000000000000000}
\end{itemize}

As the exponent of the positive number is greater, the result is positive.
Evaluating the addition is easier if the significands are aligned. In order to
achieve this, denormalize the negative value so that its exponent is also 14.
The \textbf{actual} significand then changes in the following way:

\begin{itemize}
    % Remove bullets
    \item[] \texttt{1.1010000000}
    \item[] \texttt{0.0000001101}
\end{itemize}

Therefore, the operation on the significands is a simple binary subtraction.
\[\texttt{1.1000000000} - \texttt{0.0000001101} = \texttt{1.0111110011}\]
This results in a normalized significand. Therefore, straightforwardly enough,
the complete result is \singleprecision{01000110101111100110000000000000}.

One might convert these numbers to decimal to better understand what is
happening. After doing so, it is found that the subtraction performed was
\(24576 - 208 = 24368\).

\chapter{Boolean algebra}
\section{Boolean expressions}
A way to convert a truth table into a Boolean expression is by writing an
expression that evaluates to true for each and every row that evaluates to true
and chain them together with the OR operator. This expression may later be
simplified through logic identities.

Any Boolean function can be expressed by an expression containing only AND and
NOT operations. For instance, \(A \lor B\) can be expressed as \(\lnot \left(
\left( \lnot A \right) \land \left( \lnot B \right) \right)\).

\subsection{de Morgan's Laws}
De Morgan's laws are a pair of transformation rules that are both valid rules of
inference. The rules allow the expression of conjunctions and disjunctions
purely in terms of each other via negation. In mathematical notation, the rules
state that
\[\lnot \left( A \land B \right) =
  \left( \lnot A \right) \lor \left( \lnot B \right)\]
and
\[\lnot \left( A \lor B \right) =
  \left( \lnot A \right) \land \left( \lnot B \right)\]
are valid equalities.

\chapter{Algorithms}

\section{Sorting}
\subsection{Selection sort}
\paragraph{Algorithm Description.} Sort \(n\) numbers stored in array
\(\mathbf{A}\) by finding the smallest element of \(\mathbf{A}\) and exchanging
it with the element in \(\mathbf{A}[1]\). Then find the second smallest element
of \(\mathbf{A}\), and exchange it with \(\mathbf{A}[2]\). Continue in this
manner for the first \(n - 1\) elements of \(\mathbf{A}\).

\textbf{Implementation.}

\begin{lstlisting}
for i = 1 to A.length - 1
  // sI stands for smallestIndex
  sI = i
  for j = i + 1 to A.length
    if A[j] < A[sI]
      sI = j
  // swap (if necessary)
  if (sI != i)
    tmp = A[i]
    A[i] = A[sI]
    A[sI] = tmp
\end{lstlisting}

\textbf{Analysis.} The best-case for this algorithm is an already sorted data
array. The worst-case would be produced by a sorted array with the first element
moved to the last position and all the other elements moved one place to the
left. Note that the only thing that varies is the amount of swaps made, the
algorithm has \(\Theta(n^2)\) time-complexity even for sorted input.

\section{String matching}
\subsection{Rabin-Karp (1987)}
This algorithm speeds up equality testing by using a hash function.

If the hash of the substring from the text was recomputed at each iteration,
this would become an O(mn)-time algorithm, this problem is solved by reusing
the last computed hash in the evaluation of the new hash. Such a hash function
is called a \textbf{rolling hash}.

\textbf{Rabin Fingerprint}. This hash treats every substring as a number in a
base \(\alpha\), usually a large prime.

\begin{lstlisting}
  // A Rabin Fingerprint roll.
  hash -= first_char * a ^ (m - 1)
  hash *= a
  hash += new_last_char
\end{lstlisting}

This algorithm is slower than Knuth-Morris-Pratt and Boyer-Moore for single
pattern string searching because of its slow worst case behavior. However, it is
an algorithm of choice for multiple pattern search.

For instance, to find if any string of a large number of strings is in a text we
can create a variant of the Rabin-Karp algorithm that uses a set data structure
to check whether the hash of a substring belongs to a set of hash values of
patterns in constant time.

\chapter{Hardware}
\section{Hard disks}
Any hard disk drive (HDD) can contain only four primary partitions. This
limitation may be circumvented with an extended partition, a special type of
primary partition that allows multiple logical partitions to be created within
it. An HDD may contain only one extended partition.

An HDD records data by magnetizing a thin film of ferromagnetic material on a
disk. Sequential changes in the direction of magnetization represent binary
data bits.

A typical HDD design consists of a spindle that holds flat circular disks, also
called platters, which hold the recorded data. The platters are made from a
non-magnetic material, usually aluminium alloy, glass, or ceramic, and are
coated with a shallow layer of magnetic material typically 10–20 nm in depth,
with an outer layer of carbon for protection.

The platters in contemporary HDDs are spun at speeds varying from 4,200 rpm in
energy-efficient portable devices, to 15,000 rpm for high-performance servers.
The first HDDs spun at 1,200 rpm and, for many years, 3,600 rpm was the norm.
Nowadays, the platters in most consumer-grade HDDs spin at either 5,400 rpm or
7,200 rpm.

Information is written to and read from a platter as it rotates past devices
called read-and-write heads that operate very close (often tens of nanometers)
over the magnetic surface. The read-and-write head is used to detect and modify
the magnetization of the material immediately under it.

\paragraph{Partial response maximum likelihood.} In computer data storage,
partial response maximum likelihood (PRML) is a method for converting the weak
analog signal from the head of a magnetic disk or tape drive into a digital
signal. PRML attempts to interpret correctly even small changes in the analog
signal, whereas peak detection relies on fixed thresholds. Because PRML can
correctly decode a weaker signal it \textbf{allows higher density recording}.

For example, PRML would read the magnetic flux density pattern 70, 60, 55, 60,
70 (where 60 is the baseline signal) as binary ``101'', and the same for 45, 40,
30, 40, 45 (baseline of 40) whereas peak detector would decode everything
above, say, 50 as high, and below 50 as low, so the first pattern would read
``111'' and the second as ``000''.

\chapter{Distributed systems}

\section{Replication}

There are two major approaches to achieving fault tolerance: \textbf{passive (primary-backup) replication}, in which clients communicate with a distinguished replica, and \textbf{active replication}, in which clients communicate by multicast with all replicas \cite[p.~766]{distributed-systems-coulouris-2013}.

Replication is used in many day-to-day situations.
For example, the caching of resources from web servers in browsers is a form of replication, since the data held in the caches and at the servers are replicas of one another.
DNS maintains copies of name-to-attribute mappings for computers, replicating the name resolution information in many different places \cite[p.~766]{distributed-systems-coulouris-2013}.

Replication may be used for \textbf{performance enhancement}. Caching of already downloaded and probably still valid data at clients is a classical example. A DNS lookup, for instance, may return one of the many possible IP addresses for a given resource, in a round-robin fashion \cite[p.~766]{distributed-systems-coulouris-2013}. This is also a way to improve performance by sharing the workload across multiple servers.
Replication has limits as a performance-enhancement technique when it comes to mutable data, as there must be protocols to determine whether or not the replicated copies are still valid \cite[p.~766]{distributed-systems-coulouris-2013}.

Replication may also be used for \textbf{increased availability}. Availability is usually affected by server failures and network partitions.
Replication allows alternative servers to be used if a default server fails or becomes unavailable \cite[p.~766]{distributed-systems-coulouris-2013}.
Network partitions can cause conflicts to emerge as the processes may get to have conflicting data due to the lack of synchronization between them \cite[p.~767]{distributed-systems-coulouris-2013}.

Lastly, replication may also provide \textbf{fault tolerance}. By having multiple servers capable of delivering a service correctly a system may be able to cope with server crashes and Byzantine faults, as long as there are enough servers to outvote the failed servers.

\textit{Replication transparency} is when clients do not have to be aware that multiple physical copies of data exist. Clients should only be concerned about the manipulation of the logical objects, even if there are multiple physical objects in the architecture.

A \textbf{replica manager} is a component that contain a replica of a given set of logical objects in a computer \cite[p.~769]{distributed-systems-coulouris-2013}.
It is important that operations conducted by replica managers are recoverable.
This allows the assumption that an operation at a replica manager does not leave inconsistent results if it fails part way through.

\textit{The set of replica managers may be static or dynamic}.
In a dynamic system, new replica managers may appear.
This is not allowed in a static system \cite[p.~769]{distributed-systems-coulouris-2013}.

The general model of replica management includes a component called the \textit{front end}, whose role is to communicate with one or more of the replica managers, rather than forcing the client to do this explicitly. It is important to make replication transparent. The front end may be implemented in the client's address space or it may be a separate process \cite[p.~770]{distributed-systems-coulouris-2013}.

An important consideration is how a group management service treats network
partitions. Disconnection or the failure of components such as a router in a network may
split a group of processes into two or more subgroups, with communication between the
subgroups impossible.

A \textbf{primary-partition group management service} allows at most one subgroup (a majority) to survive a partition, suspending the other processes. A \textbf{partitionable group management service} allows two or more subgroups to continue to operate \cite[p.~772]{distributed-systems-coulouris-2013}.

\subsection{Linearizability and sequential consistency}

There are various correctness criteria for replicated objects.
The most strictly correct systems are linearizable, and this property is called \textbf{linearizability}.
A replicated shared object service is linearizable if \textit{for any execution} there is some interleaving of the operations issued by the clients that satisfies that \textit{the order of operations in the interleaving is consistent with the \textbf{real times} at which the operations occurred in the actual execution} \cite[p.~777]{distributed-systems-coulouris-2013}.

It is important to note that \textit{linearizability concerns only the interleaving of individual operations}, giving no transactional guarantees.

There are obvious issues from the practicality of linearizability, because we cannot always synchronize clocks to the required accuracy.

A weaker but similar correctness condition is \textbf{sequential consistency}.
A replicated shared object service is said to be sequentially consistent if for any execution there is some interleaving of the series of operations issued by all the clients that satisfies that \textit{the order of operations in the interleaving is consistent with the \textbf{program order} in which each individual client executed them} \cite[p.~777]{distributed-systems-coulouris-2013}.
In the sequential consistency definition the only notion of ordering that is relevant is the order of events at each separate client, that is, the program order.

Every linearizable service is also sequentially consistent, but the converse does not hold \cite[p.~777]{distributed-systems-coulouris-2013}.

There are weaker consistency models, such as coherence \cite[p.~759]{distributed-systems-coulouris-2009} and weak consistency \cite[p.~760]{distributed-systems-coulouris-2009}.

\subsection{Passive (primary-backup) replication}

In the passive or primary-backup model of replication there is at any one time a \textbf{single primary replica manager} and \textbf{one or more secondary replica managers} \cite[p.~778]{distributed-systems-coulouris-2013}.

In a pure implementation of the model, the front ends communicate only with the primary replica manager to obtain the service.
The primary replica manager executes the operations and propagates the updates to the secondary replica managers.
If the primary fails, one of the secondary replica managers has to be elected and promoted to act as the primary.

This system is linearizable as long as the primary is correct, since the primary sequences all the operations to the other replica managers.

The system will only retain linearizability after the primary crashes if a single secondary becomes the new primary and if the the surviving replica managers agree on which operations had been performed at the point when the replacement primary took over \cite[p.~779]{distributed-systems-coulouris-2013}.

The front end only requires the ability to look up the new primary when the current primary does not respond to achieve fault tolerance  \cite[p.~780]{distributed-systems-coulouris-2013}.

For a passive replication system to survive up to \(f\) process crashes it requires \(f + 1\) replica managers.
A passive replication system cannot tolerate Byzantine failures \cite[p.~780]{distributed-systems-coulouris-2013}.

The passive replication model has very large overheads.
In a variation of the model, clients may be able to submit read requests to the secondary replica managers, offloading work from the primary.
The guarantee of linearizability is thereby lost, but the clients receive a sequentially consistent service \cite[p.~780]{distributed-systems-coulouris-2013}.

\subsection{Active replication}

In the active replication model, front ends multicast their requests to the group of replica managers and all the replica managers process the request independently.

Active replication \textbf{can tolerate Byzantine failures}, as the front ends can collect and compare the replies they receive \cite[p.~780]{distributed-systems-coulouris-2013}.

\textbf{Active replication systems do not achieve linearizability} because the total order in which the replica managers process requests may not be the same as the real-time order in which the clients made the requests. However, they do achieve sequential consistency \cite[p.~781]{distributed-systems-coulouris-2013}.

Front ends may send read-only requests only to individual replica managers.
In doing so, they lose the fault tolerance. However, the service remains sequentially consistent and the overall workload is reduced \cite[p.~782]{distributed-systems-coulouris-2013}.

\chapter{Computer networks}

\section{Protocols}

Protocols are relevant to solve heterogeneity.

An \textbf{entity} is any device capable of sending and receiving data.

\textbf{Peers} are entities from the same layer in the receiver and sender.

The \textbf{protocol stack} is the set of protocols used by a system.

\subsection{Types of standard}

\href{https://en.wikipedia.org/wiki/De_facto_standard}{\emph{De facto}
standards} are standards which are actually in use. \emph{De jure}
standards are recognized by a committee.

\section{OSI model}

The \href{https://en.wikipedia.org/wiki/OSI_model}{OSI model} has seven layers. It doesn't specify anything about their implementation.

\section{Transmission medium}

The \textbf{bandwidth of a channel} is the range of frequencies that is passed by it.
One can show that that the rate at which pulses can be transmitted over a channel is proportional to the bandwidth according to \cite{communication-networks-leon-garcia-2000}.

\subsection{Media layers}

\begin{enumerate}
\item \textbf{Physical}. Transmission and reception of raw bit streams over a physical medium.
\item \textbf{Data link}. Reliable transmission of data frames between two nodes connected by a physical layer.
\item \textbf{Network}. Structuring and managing a multi-node network, including addressing, routing and traffic control.
\end{enumerate}

\subsection{Host layers}

\begin{enumerate}
\item \textbf{Transport}. Reliable transmission of data segments between points on a network, including segmentation, acknowledgement and multiplexing.
\item \textbf{Session}. Managing communication sessions, i.e. continuous exchange of information in the form of multiple back-and-forth transmissions between two nodes.
\item \textbf{Presentation}. Translation of data between a networking service and an application; including character encoding, data compression and encryption/decryption.
\item \textbf{Application}. High-level APIs, including resource sharing, remote file access.
\end{enumerate}

\section{Medium access control}

\subsection{IEEE 802.11}

In the 802.11 LAN, stations use CSMA/CA to mitigate the difficulty to sense colliding transmissions by leaving small gaps between frames. The stations can also use the RTS/CTS protocol to combat hidden terminals that arise because of the fact that the coverage regions of stations may differ  \cite[p.~349]{computer-networks-tanenbaum-2012}.

\subsection{Devices}

In order to be able to better differentiate the following devices it is important to note that they operate in \textbf{different layers}.

\subsubsection{Repeaters and hubs}

\textbf{Repeaters} do not understand frames, packets, or headers.
They just clean up, amplify, and repeat their input as their output.

\textbf{Hubs} just join their input lines electrically.
Therefore, frame collisions can happen through a hub.
All the lines coming into a hub must operate at the same speed.
Hubs, just like repeaters, only care about electric signals.

\subsubsection{Switches}

Switches can be used to join LANs into larger LANs.
They operate in the data link layer, examining the data link layer address to forward frames.
Because they are not supposed to examine the payloads of the frames, they can handle any network layer protocol.
Unlike a hub, \textbf{each port has its own collision domain}.

If the port has a full-duplex point-to-point line, the CSMA/CD algorithm is not needed.
When a frame arrives, the switch extracts the destination address from the frame header and looks it up in a table to see where to send the frame.
For Ethernet, this address is the 48-bit Ethernet destination address.
The bridge only outputs the frame on the port where it is needed and can forward multiple frames to different ports at the same time.

There are two algorithms used to create transparent bridges (that is, bridges which do not require any additional configuration): a \textit{backward learning algorithm} to stop traffic being sent where it is not needed, and a \textit{spanning tree algorithm} to break loops that may be formed by connecting switches without much thought \cite[p.~333]{computer-networks-tanenbaum-2012}.

Switches have much better performance than hubs, and can also allow for the connection lines of different speeds. Internal buffers allow a switch to accept a frame on a port of a given speed and transmit it to another port at a different speed. Buffers are needed even if all the ports have the same speed as the switch may have to temporarily store frames if multiple ports are sending to the same destination port \cite[p.~341]{computer-networks-tanenbaum-2012}.

The term \textbf{bridge} was used to denote switches but is not a popular term anymore. The terms ``bridge'' and ``switch'' can nowadays be used interchangeably \cite[p.~350]{computer-networks-tanenbaum-2012}.

\subsubsection{Routers}

Routers completely discard the data link layer header as they route packets instead of frames and for routing packets the physical source address does not matter.
The routing software only cares about the IPv4 or IPv6 address to make its routing decisions.

\subsection{Virtual LANs}

It is a good practice to group users on LANs to reflect the organizational structure rather than the physical layout of the buildings. Three major reasons for the proper grouping of LANs are \textbf{security}, \textbf{load balance} and \textbf{broadcast traffic}.

Security, for instance, might be related to the fact that one LAN might host computers which are publicly exposed for external use, while another LAN might contain confidential information which should never be publicly exposed  \cite[p.~343]{computer-networks-tanenbaum-2012}.

Load might be an issue if a given department is using all their network bandwidth. This congestion should ideally be isolated from all other departments \cite[p.~344]{computer-networks-tanenbaum-2012}.

Broadcast messages consume substantial LAN capacity on large LANs, so keeping the number of devices in a LAN low is a good idea to reduce the impact of broadcast traffic \cite[p.~344]{computer-networks-tanenbaum-2012}.

Given these reasons, it is important to be able to separate the logical topology from the physical topology.
Another reason for this decoupling is that the number of ports in a switch might be too low or too high for the number of users in a single LAN.

This gave rise to standards for virtual LANs (VLANs). They are based on VLAN-aware switches, because for VLANs to work correctly it is important that the switches know which VLANs are accessible through which ports.

VLANs have been implemented according to the 802.1Q standard, issued in 1998. They caused a change in the Ethernet header, which could be gradually adopted because these new headers were only needed on the switches. 802.1Q raised the maximum frame size from 1518 bytes to 1522 bytes. VLAN-aware switches can configure themselves based on traffic observations \cite[p.~348]{computer-networks-tanenbaum-2012}.

\section{The network layer in the Internet}

In the network layer, the Internet can be viewed as a collection of networks or \textbf{autonomous systems} that are interconnected. Despite there not being any real structure, several major backbones exist. These are constructed from high-bandwidth lines and fast routers.

What holds the whole Internet together is the network layer protocol, IP (Internet Protocol).

A good way to think of the network layer is this: its job is to provide a way to transport packets from source to destination, with no regard to whether these machines are on the same network or whether there are other networks in between them and without delivery guarantees. \cite{computer-networks-tanenbaum-2012}

Communication in the Internet happens through the transport layer, which takes data streams and breaks them up so that they are viable IP packets. Even though IP packets can be up to 64 KiB, in practice they are not more than 1500 bytes (to make sure they fit in a single Ethernet frame) according to \cite{computer-networks-tanenbaum-2012}.
IP routers forward packets until the destination is reached. At the destination, the network layer reassembles the packets into the original datagram, which is then handled to the transport layer.
It is the job of the \textbf{IP routing protocols} to decide which of the usually many possible paths to the destination to take.

\subsection{Virtual circuit and datagram networks}

While the transport layer connections are \textbf{process-to-process}, the network layer connections are \textbf{host-to-host} \cite[p.~313]{computer-networking-kurose-2012}.
In all major computer network architectures to date the network layers provide either a host-to-host connectionless service or a host-to-host connection-oriented service, but never both. Connection-oriented services are called \textbf{virtual circuit networks} at the network layer, while computer networks that only provide a connectionless service at the network layer are called \textbf{datagram networks} \cite[p.~313]{computer-networking-kurose-2012}.

Connection-oriented services in the transport layer are implemented at the edge of the network in the end systems, however, in the network layer connection services are implemented in the routers as well as in the end systems.

\subsubsection{Virtual circuit networks}

A virtual circuit (VC) consists of a path (a series of links and routers), VC numbers (one for each link along the path), and entries in the forwarding table of each router along the path.

A packet of a VC will carry a VC number in its header. However, because a virtual circuit may have a different VC number on each link, each intervening router must replace the VC number of each packet with a new VC number, obtained from the forwarding table \cite[p.~314]{computer-networking-kurose-2012}.

There are two main reasons for each link using its own VC number. First, using a by-link VC number reduces the required size of the field. If all the network used the same value, the field could need many more bits than it does if it is assigned on a by-link basis. Second, and more importantly, the VC setup is simplified by permitting a different VC number at each link along the path of the VC. Specifically, with multiple VC numbers, each router can choose a VC without caring about the VC numbers the other routers are using. If it were required for all routers to use a common VC for the same connection there would be many message exchanges to reach consensus about which number to use \cite[p.~315]{computer-networking-kurose-2012}.

In a VC network, routers must maintain \textbf{connection state information}.

The three common phases in a virtual circuit are:
\begin{enumerate}
    \item \textbf{VC setup}. During the setup phase, the transport layer contacts the network and waits for the network to setup the VC. This involves adding an entry in the routing table of each router along the path.
    \item \textbf{Data transfer}. As expected, after the virtual circuit is established, packets can begin to flow through the VC.
    \item \textbf{VC teardown}. This is initiated by the sender, which must inform the network of its desire to terminate the VC. The network layer then typically informs the other end system about the termination and updates the forwarding tables in all intermediary routers.
\end{enumerate}

A major difference between VC setup at the network layer and connection setup at the transport layer (as the TCP handshake) is that the \textbf{connection setup at the transport layer involves only the two end systems}. However, in VC network, \textbf{routers along the path between the two end systems are involved in VC setup, and each router must be aware of all VCs passing through it} \cite[p.~316]{computer-networking-kurose-2012}.

The messages sent to initiate and terminate a VC are called \textbf{signaling messages}, and their protocols are called \textbf{signaling protocols}.

\subsubsection{Datagram networks}

In a datagram network, such as the Internet, each time an end system needs to send a packet, it just has to fill in the destination address and put the packet on the network.
Each router along the path just looks at the packet destination address to decide how it will forward the packet.
The router forwarding table uses the \textbf{longest matching prefix} to determine which interface to use \cite[p.~318]{computer-networking-kurose-2012}.

Because forwarding tables in datagram networks can be modified at any time, a series of packets sent from one end system to another may follow very different paths and, as a consequence, arrive out of order \cite[p.~319]{computer-networking-kurose-2012}.

\subsection{Routing algorithms}

The main function of the network layer is routing packets.
The routing algorithm is the part of the network layer software responsible for deicing which output an incoming packet should take when leaving the router.
In a datagram network, routing decisions must be made for every data packet since the best route may have changed.
However, if the network uses virtual circuits, routing decisions are made only when a new virtual circuit is set up and packets will only follow the established route \cite[p.~362]{computer-networks-tanenbaum-2012}.

One can think that a router has two processes inside it.

\begin{enumerate}
    \item \textbf{Forwarding}.
    It handles each packet as it arrives, looking up the outgoing line to use for it in the routing tables.
    \item \textbf{Routing}.
    It is responsible for filling in and updating the routing tables.
\end{enumerate}

The desired properties of a routing algorithm are: correctness, simplicity, robustness, stability, fairness, and efficiency.
Correctness and simplicity are self-explanatory, but the need for robustness may be less obvious.
The routing algorithm should be able to cope with changes in the topology and traffic without requiring all jobs in all hosts to be aborted \cite[p.~363]{computer-networks-tanenbaum-2012}.

Stability is also important. There exist routing algorithms that \textit{never} converge to a fixed set of paths.
A stable algorithm reaches equilibrium and stays in equilibrium.
The convergence should be quick, since communication may be disrupted while the algorithm is reaching equilibrium \cite[p.~363]{computer-networks-tanenbaum-2012}.

\textbf{Fairness and efficiency are often contradictory goals}.
Minimizing the mean packet delay and maximizing total network throughput are both valid options.
These two goals are also in conflict, since operating queuing systems near capacity implies a long queuing delay.
Many networks try to minimize the distance a packet must travel, or reduce the number of hops a packet must make.
Either choice tends to improve the delay and also reduce the amount of bandwidth consumed per packet, which tends to improve the overall network throughput \cite[p.~363]{computer-networks-tanenbaum-2012}.

\textbf{Nonadaptive routing algorithms} do not use measurements or estimates to make decisions of the current topology and traffic.
Instead, the choice of the route to use to get from point A to point B is computed in advance and downloaded to the routers when the network is booted.
This procedure is sometimes called \textbf{static routing}.
Because it does not respond to failures, static routing is mostly useful for situations in which the routing choice is clear.

\textbf{Adaptive routing algorithms} change their routing decisions to reflect changes in the topology.
Sometimes, changes in traffic are also taken into account.
These dynamic routing algorithms differ in where they get their information, when they change the routes, and what metrics they use for optimization \cite[p.~364]{computer-networks-tanenbaum-2012}.

\textbf{The optimality principle} states that if a router J is on the optimal path between I and K, then the optimal path from J to K also falls along the same route. As a consequence of this, the optimal routes from all sources to a given destination form a \textbf{sink tree} \cite{dynamic-programming-bellman-2003}. Note that multiple sink trees may exist. Routing algorithms have to discover and use the sink trees for all routers.

\subsubsection{Shortest path algorithm}

The routing algorithm may be a shortest path algorithm, which tries to find shortest paths in a weighted graph on which the edge weights are functions which evaluate how expensive it is to take a given route.
This might be done with Dijkstra's algorithm and is a static routing algorithm.

\subsubsection{Flooding}

Another possibility is called flooding, in which every incoming packet is sent out on every outgoing line except the one it arrived on \cite[p.~368]{computer-networks-tanenbaum-2012}.

Flooding, as one might expect, generates a huge (possibly infinite) number of duplicates. In order to counter this issue, a hop counter is required. The initial value of this counter might be the diameter of the network. A better technique for damming the flood is to keep track of which packets have been flooded in each router, to avoid sending them out a second time \cite[p.~368]{computer-networks-tanenbaum-2012}.

This algorithm ensures that a packet is delivered to every node in the network, which is wasteful if there is a single destination that needs the packet, but effective for broadcasting information. Flooding is tremendously robust, because even if a large number of routers are destroyed, flooding will find a path (if one still exists) to get a packet to its destination. It also requires very little setup \cite[p.~370]{computer-networks-tanenbaum-2012}.

\subsubsection{Distance vector routing}\label{Distance vector routing}

A distance vector routing algorithm operates by having a table in each router giving the best known distance to each destination and which link to use to get there.
These tables are updated by communicating with neighbor routers.
Eventually, every router should know the best link to reach each destination.
It is sometimes called the \textbf{distributed Bellman-Ford algorithm}.

Distance vector routing is useful as a simple technique by which routers can collectively compute shortest paths, but its convergence (the settling of routes to best paths across the network) may be too slow \cite[p.~372]{computer-networks-tanenbaum-2012}.

Assuming synchronized routing table exchanges, if a network's longest path has N hops, within N exchanges all routers will know about an improvement \cite[p.~372]{computer-networks-tanenbaum-2012}. However, propagating to the network that a route is now slower is much less efficient. Due to a problem known as the \textbf{count-to-infinity problem} \cite[p.~373]{computer-networks-tanenbaum-2012}, if there are no more routes to a given router, the distance to it in the routing tables will approach the value defined to represent infinite distance linearly, which may take a very long time. Therefore, one could say that \textit{this algorithm reacts rapidly to good news, but slowly to bad news}.

\subsubsection{Link state routing}\label{Link state routing}

Link state routing is the historical successor of distance vector routing algorithm and it does not have the count-to-infinity problem \cite[p.~373]{computer-networks-tanenbaum-2012}.

The algorithm can be described in the five following parts.

\begin{enumerate}
    \item Discover the neighbors and learn their addresses.
    \item Set the distance to each neighbor.
    \item Construct a packet with all this information.
    \item Send this packet to and receive similar packets from all other routers.
    \item Compute the shortest path to every other router.
\end{enumerate}

This process distributes the complete topology to every router, thus allowing Dijkstra's algorithm to be used at each router to find the shortest path to every other router \cite[p.~374]{computer-networks-tanenbaum-2012}.

Link state routing requires more memory and computation than distance vector.
For a network with \(n\) routers, each with up to \(k\) neighbors, the memory required to store the input data is proportional to \(kn\). Also, the computation time grows faster than \(kn\), an issue in large networks.
However, link state routing works well because it doesn't have slow convergence problems.
Many ISPs use the \textbf{IS-IS} (Intermediate System-Intermediate System) link state protocol.
\textbf{OSPF} (Open Shortest Path First) is the other main link state protocol \cite[p.~378]{computer-networks-tanenbaum-2012}.

It is important to understand that link state routing, distance vector routing, and some other algorithms rely on processing at all the routers to compute routes. Problems at even a small number of routers can disrupt the whole network. As the network grows, the probability of at least one router failing gets bigger, so it is important to think about this when designing large networks \cite[p.~378]{computer-networks-tanenbaum-2012}.

\subsubsection{Hierarchical routing}\label{Hierarchical routing}

With network growth comes routing table growth.
Bigger routing tables require more memory to store them, more CPU time to scan them, and more bandwidth to send them around \cite[p.~378]{computer-networks-tanenbaum-2012}.
There is a point at which the tables are so big that it is no longer feasible to have each router know about every other router, so the routing has to be done hierarchically, very much like in telephone networks \cite[p.~379]{computer-networks-tanenbaum-2012}.

In hierarchical routing, the routers are divided into \textbf{regions}.
Each router knows all the details about how to route packets to destinations within its own region, but does not know about the structure of other regions \cite[p.~379]{computer-networks-tanenbaum-2012}.

For very large networks, regions may not be enough, then more levels of aggregation are required.
These gains are not free, because in many cases the path grows as we need to reach upper aggregation levels instead of sending directly to another router \cite[p.~379]{computer-networks-tanenbaum-2012}.

It 1979, it was shown that the optimal number of levels for a network with \(N\) routers is \(\ln n\), which requires a total of \(e \ln N\) entries per routing table. It was also shown that the increase in effective mean path length caused by hierarchical routing is sufficiently small that it is usually acceptable \cite{kamoun-kleinrock-1976}.

\subsubsection{Broadcast routing}

Sending a packet to all destinations is called \textbf{broadcasting}.
The trivial solution of sending multiple packets, one for each destination, is called \textbf{separately addressed packets}.
An improvement to the trivial solution is to use \textbf{multidestination routing}.
In this case each packet contains either a list of destinations or a bitmap which indicates to which devices the packet has to be delivered. Both solutions require the source to know all the destinations.

A better broadcasting technique is \textbf{flooding}, which is not a very good solution for point-to-point communication. However, if properly implemented using a sequence numbers per source, it is a very efficient broadcasting algorithm \cite[p.~381]{computer-networks-tanenbaum-2012}.

However, one can do better than flooding by using \textbf{reverse path forwarding}, which requires all the shortest path routes for regular packets to have been computed. This algorithm analyzes the link through which the packet arrived at the router. If it came from the the link that is normally used for sending packets toward the source of the broadcast, there is an excellent chance that the broadcast packet itself followed the best route to the router and is the first copy to arrive. Then the router forwards copies of it onto all links except the one it arrived one. If, however, the broadcast packet arrived on a link other than the best one, the packet is discarded as it is likely a duplicate. This algorithm does not need to know in anticipation all the destinations and it does not require any methods for flood control \cite[p.~381]{computer-networks-tanenbaum-2012}.

A last alternative, which is optimal, is to use a \textbf{spanning tree} of the network. If each router knows the sink tree of the network, then it is possible to do broadcasting with forwarding perfection. However, this requires each router to be able to compute the sink tree, which is possible when using some routing algorithms, such as link state routing, but impossible under other algorithms, such as distance vector routing \cite[p.~382]{computer-networks-tanenbaum-2012}.

\subsection{IP addresses}

IP addresses are hierarchical, unlike Ethernet addresses. Each 32-bit address is comprised of a variable-length network portion in the top bits and a host portion in the bottom bits.
The network portion is \emph{common across shared by all the same value for all hosts on a single network}.
This means that a network corresponds to a contiguous block of IP address space with a common prefix \cite{computer-networks-tanenbaum-2012}.

IP addresses are assigned to interfaces and not to computers.
Therefore, one computer can have more than one IP address.

\subsection{ARP}

ARP (Address Resolution Protocol) is a protocol run by almost every machine on the Internet. It is defined in RFC
826. It allows for configuration-less MAC resolution from IPv4 addresses. Essentially, a computer will broadcast a request for the MAC of whoever has a given IPv4 address. The device with this IPv4 address then will reply with its own MAC, thus resolving the question \cite{computer-networks-tanenbaum-2012}.

\subsection{IPv4}

The IPv4 header uses \textbf{big-endian integers}. Little endian would have been a better choice, but at the time IP was designed, no one knew it would dominate computing \cite{computer-networks-tanenbaum-2012}.

The \textbf{version} field keeps track of which version of the protocol the datagram belongs to. By including the version on datagram, it becomes possible to have a slow transition between versions over a period of time.

The header length is not constant. There's a field in the header, IHL, to tell how long the header is, in 32-bit words. The minimum value of this field is 5, which applies when no options are present.
The maximum value of this 4-bit field is 15, which limits the header to 60 bytes, and the options field to 40 bytes. For some options, such as one that records the route a packet has taken, 40 bytes is far too small.
This makes those options effectively useless \cite{computer-networks-tanenbaum-2012}.

The \textbf{differentiated services} field is one of the few fields that has changed its meaning (slightly) over the years \cite{computer-networks-tanenbaum-2012}.
It was and still is used to distinguish between different classes of service, making various combinations of reliability and speed possible.
For digitized voice, fast delivery beats accurate delivery.
For file transfer, error-free transmission is more important than fast transmission \cite{computer-networks-tanenbaum-2012}.
This field provided 3 bits to signal priority and 3 bits to signal whether a host cared more about delay, throughput, or reliability.
However, no one really knew what to do with these bits at routers, so they were left unused for many years.
When differentiated services were designed, \href{https://en.wikipedia.org/wiki/Internet_Engineering_Task_Force}{IETF} threw in the towel and reused this field.
Now, the top 6 bits are used to mark the packet with its service class.
The bottom 2 bits are used to carry explicit congestion notification information, such as whether the packet has experienced congestion \cite{computer-networks-tanenbaum-2012}.

The \textbf{total length} field in the IPv4 includes everything in the datagram: both header and data.
The maximum length is 65,535 bytes. At present, this upper limit is tolerable, but with future networks, larger datagrams may be needed according to \cite{computer-networks-tanenbaum-2012}.
\textbf{I have no idea as to why the datagram limit is an issue}.
See my \href{https://networkengineering.stackexchange.com/questions/54480/why-is-the-ip-datagram-total-length-an-issue}{Network Engineering Stack Exchange question}.

Next comes an unused bit, which is surprising, as available real estate in the IP header is extremely scarce.
As an April Fool's joke, Bellovin proposed using this bit to detect malicious traffic.
This would greatly simplify security, as packets with the ``evil'' bit set would be known to have been sent by attackers and could just be discarded.
This bit, as one might expect, serves no purpose \cite{computer-networks-tanenbaum-2012}.

The 8-bit \textbf{time to live} field is a counter used to limit packet lifetimes.
\textit{In practice, it just counts hops}.
When it hits zero, the packet is discarded and a warning packet is sent back to the source host.
\textbf{This feature prevents packets from wandering around forever, something that otherwise might happen if the routing tables ever become corrupted} \cite{computer-networks-tanenbaum-2012}.

The \textbf{protocol} field tells it which transport process to give the packet to.
Protocols and other assigned numbers are contained in an online database located at \href{https://www.iana.org}{the Internet Assigned Numbers Authority}.

As the header carries vital information, it has its own checksum for protection. However, there is a lot of redundancy as Ethernet, TCP and UDP all have checksums too.

\subsection{IPv5}

IPv5 was an experimental real-time stream protocol that was never widely used \cite{communication-networks-leon-garcia-2000}.
It was initially envisioned that the ST-2 protocol would become IPv5, but ST-2 was later dropped \cite{computer-networking-kurose-2012}.

\subsection{IPv6}
In the early 1990s, as the IPv4 address space was being used up, a new IP protocol was developed.
It's design took into consideration operational experience with the IPv4.

\subsubsection{IPv6 datagram format}

The address changed from 32 to 128 bits.
This makes it so that \textit{every grain of sand on the plant can be IP-addressable}\footnote{Earth has roughly \(7.5 \times 10^{18}\) grains of sand, a bit less than \(2^{63}\).} according to \cite{computer-networking-kurose-2012}.
In addition to the unicast and multicast addresses, IPv6 has a new type of address called the \textbf{anycast address}, which allows a datagram to be delivered to any \textbf{one} of a group of hosts.

The header now has a fixed 40-byte size.
The IPv6 datagram is also limited to 65,535 bytes, but the new payload length field does not take the fixed-length 40-byte header into account.
The \href{https://tools.ietf.org/html/rfc2675}{RFC 2675} allows for much larger payloads by using a 32-bit length field.

IPv6 also has a definition of \textbf{flow}. This allows packets to be labelled for special handling if they belong to certain flows, such as the packets of real-time video transmissions.
The designers of IPv6 foresee the eventual need to be able to differentiate among the data flows \cite{computer-networking-kurose-2012}.

IPv6 does not allow for fragmentation at intermediary routers.
If an IPv6 datagram received by a router is too large to be forwarded, the router drops the datagram and sends a ``Packet Too Big'' ICMP error message to the sender.
The sender can then resend the data, using a smaller IP datagram size.
Fragmentation and reassembly is a time-consuming operation and removing this functionality from the routers and placing it in the end systems considerably speeds up IP forwarding within the network \cite[p.~358]{computer-networking-kurose-2012}.

The checksum was removed, as it is already performed by Ethernet at the data link layer and by TCP and UDP at the transport layer.
Because the TTL field of the IPv4 header changes at every hop, this checksum has to be recomputed at every hop.

Even though the options field is no longer a part of the standard IP header, it has not gone away.
The options field is one of the possible next headers pointed from within the IPv6 header, just as TCP or UDP headers might be the next header in an IP packet \cite[p.~359]{computer-networking-kurose-2012}.
There is also a new version of the ICMP protocol, named ICMPv6 for the new IPv6 features.

\subsubsection{IPv4 to IPv6 transition}

The transition from IPv4 to IPv6 is difficult. Even though newer systems can support IPv4, legacy systems may not support IPv6. The idea of a single world-wide reboot to IPv6 isn't practical. The most straightforward way to introduce IPv6 nodes is the \textbf{dual-stack} approach. In this approach IPv6 nodes have a complete IPv4 implementation.

For this to work a node has to have a way to figure out whether or not another node is IPv6-capable. This is done through DNS. The DNS resolution returns either an IPv4 or an IPv6 address to indicate that the node is IPv6-capable or not \cite[p.~360]{computer-networking-kurose-2012}.

An alternative is \textbf{tunneling}. It solves the problem by allowing IPv6-capable nodes to interoperate even if they are connected to each other by intervening IPv4 routers. This is done by putting the entire IPv6 datagram in the payload of the IPv4 datagram. The intervening IPv4 routers in the tunnel route this IPv4 datagram among themselves, just as they would any other datagram, blissfully unaware that the IPv4 datagram itself contains a IPv6 datagram \cite[p.~360]{computer-networking-kurose-2012}.

Europe's Third Generation Partnership Program specified IPv6 as the standard addressing scheme for mobile multimedia \cite[p.~362]{computer-networking-kurose-2012}.

IPv6 has taught us that it is enormously difficult to change network-layer protocols. Since the early 1990s, numerous new network-layer protocols have been trumpeted as the next major revolution for the
Internet, but most of these protocols have had limited penetration to date.
These protocols include IPv6, multicast protocols, and resource reservation protocols.
On the other hand, at the application layer the Internet has witnessed rapid deployment of new protocols: the Web, instant messaging, P2P file sharing, multimedia streaming, and distributed games \cite[p.~362]{computer-networking-kurose-2012}.

\section{Transport layer}

\subsection{TCP/IP}

TCP/IP groups OSI layers 1 and 2 under Network Interface and 5, 6, and 7 under Application.

\section{Application layer}

\subsection{File transfer protocol (FTP)}

FTP is used to allow a local host to transfer files to or from a remote host. The protocol uses password authentication but uses no encryption whatsoever \cite[p.~116]{computer-networking-kurose-2012}.

FTP uses TCP on the ports 20 and 21 for data and control, respectively \cite[p.~117]{computer-networking-kurose-2012}. Because of this separation, one can say that FTP sends its control information \textbf{out-of-band}. HTTP, however, sends its control information \textbf{in-band}.

In FTP, a single control connection is used throughout the user session. However, a new data connection is created for each file transferred. The server also has to keep \textbf{state} for each open session.

\subsection{HTTP}

\subsubsection{HTTP status codes}
HTTP status codes convey the result of the attempts of the server to satisfy the request.

\begin{itemize}
 \item 1xx : informational
 \item 2xx : success
 \item 3xx : redirection
 \item 4xx : client error
 \item 5xx : server error
\end{itemize}

\section{Network security}

In the first decades of computer networks, they were used for university researches sharing emails and corporate employees sharing printers. Because of this, security was not a core concern. However, people started using it for all sorts of financial transactions and private information, which made security a main concern.

Security can be divided roughly into security, authentication, nonrepudiation, and integrity control. \textbf{Secrecy} deals with keeping information out of the hands of unauthorized users. \textbf{Authentication} deals with determining who you are talking with before revealing sensitive information. \textbf{Nonrepudiation} deals with signatures and proving that someone did something. \textbf{Integrity control} has to do with ensuring that the received message is really the one sent and not something that a malicious adversary modified in transit \cite[p.~764]{computer-networks-tanenbaum-2012}.

All of the protocol stack layers can contribute to security. One might use sealed tubes with an inert gas to protect cables and monitor for pressure variations in order to detect tampering \cite[p.~765]{computer-networks-tanenbaum-2012}. In the data link layer, \textbf{link encryption} can be used. It involves encrypted packets ad they leave one link and decrypting them when they reach another \cite[p.~765]{computer-networks-tanenbaum-2012}.
In the network layer, \textbf{firewalls} can be installed to keep some packets out. IP security also works on the network layer \cite[p.~765]{computer-networks-tanenbaum-2012}.
In the transport layer, connections can be encrypted end-to-end, that is, process-to-process \cite[p.~765]{computer-networks-tanenbaum-2012}.
User authentication and nonrepudiation can only be properly handled in the application layer \cite[p.~765]{computer-networks-tanenbaum-2012}.

It is well-documented that most security failures at banks, for example, are due to engineering incompetence and lax security procedures in the name of good customer relations \cite[p.~765]{computer-networks-tanenbaum-2012}.

\subsection{Cryptography}

\textbf{Cryptography} is the foundation of most of network security.
A \textbf{cipher} is a character-for-character transformation, with no regard to the linguistic structure of the message \cite[p.~766]{computer-networks-tanenbaum-2012}.

A \textbf{passive intruder} just listen to the messages being transmitted, while an \textbf{active intruder} can manipulate messages \cite[p.~767]{computer-networks-tanenbaum-2012}.

The messages to be encrypted are known as the \textbf{plaintext}. They are transformed by a function parameterized by a \textbf{key}.
The output of this function is the \textbf{ciphertext}, which might be intercepted by an \textbf{intruder}, which we should assume can copy the complete ciphertext.
However, only the intended recipients have the \textbf{decryption key}, and therefore only they can decode the ciphertext.
\textbf{Cryptanalysis} is the art of breaking ciphers.

The effort of invent, test, and install a new cryptographic algorithm has always made it impractical to keep the encryption algorithm secret.
Thinking it is secret when it isn't does more harm than good \cite[p.~768]{computer-networks-tanenbaum-2012}.

\textbf{Kerckhoff's principle} states that the algorithms should be public, and only the keys secret \cite[p.~768]{computer-networks-tanenbaum-2012}.

\textbf{Security by obscurity} is the name given to the practice of trying to keep the algorithm itself secret.
This is generally regarded as a bad idea. The longer the key used, the higher the \textbf{work factor} for the cryptanalyst.
From the cryptanalyst point of view, there are three principal variations of the cryptanalysis problem.

\begin{enumerate}
    \item \textbf{Ciphertext-only}. The cryptanalyst only has ciphertext.
    \item \textbf{Known plaintext}. The cryptanalyst has some ciphertext and matching plaintext.
    \item \textbf{Chosen plaintext}. The cryptanalyst has the ability to encrypt pieces of plaintext.
\end{enumerate}

\subsubsection{Substitution ciphers}

Substitution ciphers work by mapping each character into another character.
Even though ciphers are statistically secure, they may easily be broken if the frequency distribution of the values of the original message is known.

\subsubsection{Transposition ciphers}

While substitution ciphers preserve the plaintext order but disguise the symbols, transposition ciphers reorder the symbols without disguising them \cite[p.~771]{computer-networks-tanenbaum-2012}.

\subsubsection{One-time pads}

One-time pads are a way to construct an unbreakable cipher.
It uses a random bit string of the same length as the plaintext as the key and calculates the exclusive or between the key and the original message.
There is simply no information in the message because all possible plaintexts of the given length are equally likely.
It is important to point out that for any plaintext, there will be a key which converts any ciphertext of same length into this plaintext \cite[p.~772]{computer-networks-tanenbaum-2012}.

\subsubsection{Fundamental cryptographic principles}

\textbf{All encrypted messages must contain some redundancy}.
One can state this redundancy as the property that the recipient must be able to tell whether a decrypted message is valid by a simple examination of the message.
If the messages have no redundancy, almost any message will be a valid message, which is not a good thing as attackers may easily create fake messages.
Therefore, redundancy is needed to prevent active intruders from sending garbage and tricking the receiver into acting over the decrypted garbage.
However, this same redundancy makes it much easier for passive intruders to break the system \cite[p.~778]{computer-networks-tanenbaum-2012}.

\textbf{Each encrypted messages can be verified as being fresh}. This is needed to help prevent active intruders from just resending old messages.

\subsection{Symmetric-key algorithms}

Nowadays, due to the advent of computers, cryptographic algorithms have to be so complex so that even if the cryptanalyst can acquire a vast amount of enciphered text, he will not be able to decrypt it without the key.

Symmetric-key algorithms use the same key for encryption and decryption. Block ciphers transform a block of plaintext into a block of ciphertext \cite[p.~779]{computer-networks-tanenbaum-2012}.

In the literature, an iteration of a cryptographic algorithm over the data is called a \textbf{round} \cite[p.~780]{computer-networks-tanenbaum-2012}.

\subsubsection{DES and AES}

The \textbf{Data Encryption Standard (DES)} algorithm was originally developed by IBM.
Some controversy arose from the fact that the NSA reduced its key size from 128 bits to 56 bits.
People suspected that the key length was reduced to make sure that NSA could just break DES, but not organization with a smaller budget could.
Today, for less than US\$ 10,000 one can buy a machine that breaks DES in under 1 day given plaintext and matching ciphertext \cite[p.~782]{computer-networks-tanenbaum-2012}.

Triple DES was proposed some time after DES. It used two 56-bit keys instead of one and worked by encrypting with \(K_1\), decrypting with \(K_2\), and then encrypting with \(K_1\).
This was done for backwards compatibility.
Because of the way DES was designed, a decryption step should be just as good as an encryption step, but using encrypt-decrypt-encrypt instead of encrypt-encrypt-encrypt allowed for legacy systems to set \(K_1 = K_2\) and be able to communicate with newer systems \cite[p.~783]{computer-networks-tanenbaum-2012}.

In 1997, the NIST sponsored a public contest for a new cryptographic algorithm to determine the algorithm for the \textbf{Advanced Encryption Standard (AES)}.
The contest rules were the following.

\begin{enumerate}
\item The algorithm must be a symmetric block cipher.
\item The full design must be public.
\item Key lengths of 128, 192, and 256 bits must be supported.
\item Both software and hardware implementations must be possible.
\item The algorithm must be public or licensed on nondiscriminatory terms.
\end{enumerate}

In 2000, NIST announced that it had selected Rijndael (pronounced rhine-doll) for AES.
Due to the openness of the competition and the fact that the winning team consisted of two young Belgian cryptographers who were unlikely to have any ties to the NSA, Rijndael has become the world's main cryptographic cipher.
AES encryption and decryption is today part of some instruction sets, such as Intel's \cite[p.~784]{computer-networks-tanenbaum-2012}.

AES has two variants: 128-bit block with 128-bit key and 128-bit block with 256-bit key.

\subsubsection{Cipher modes}

Despite their complexity, AES and all other block ciphers are just a monoalphabetic substitution cipher using big characters (128-bit characters for AES and 64-bit characters for DES) \cite[p.~787]{computer-networks-tanenbaum-2012}.
Therefore, the way one uses the cipher matters greatly.

For instance, the \textbf{electronic code book} mode simply replaces each plaintext block with a ciphertext block.
It is unsafe, as intruders may just swap blocks around and get a valid message as a result.

One alternative possibility is the \textbf{cipher block chaining} mode, in which each plaintext block is XORed with the previous ciphertext block before encryption.
The main reason for using cipher block chaining is that it makes cryptanalysis more difficult because the same plaintext block may result in different ciphertext blocks depending on the message \cite[p.~789]{computer-networks-tanenbaum-2012}.

Other possibilities include the \textbf{cipher feedback} mode, the \textbf{stream cipher} mode, and the \textbf{counter} mode.

\subsubsection{Cryptanalysis}

A relevant development in cryptanalysis is \textbf{differential cryptanalysis}, which can be used to attack any block cipher.
It consists of observing what the algorithm does to very similar plaintext blocks, which can show that some patterns are more common than others, which then lead to probabilistic attacks.

Another notable development is \textbf{linear cryptanalysis}.
It works by XORing certain bits in the plaintext and ciphertext together and examining the result.
When done repeatedly, half the bits should be zeros, and half the bits should be ones.
However, most ciphers introduce a bias in one direction or the other, and this bias, however small, can be exploited to reduce the work factor \cite[p.~793]{computer-networks-tanenbaum-2012}.

Yet another development is the \textbf{power consumption analysis} to find secret keys.
If the CPU is processing the secret key bit by bit, it is possible to monitor its power usage to find out what the secret key is.
Therefore, the power consumption should be made independent of the keys used to prevent these types of attacks \cite[p.~793]{computer-networks-tanenbaum-2012}.

Lastly, it is also worth mentioning \textbf{timing analysis}. The time certain parts of the algorithm take usually depends on the keys used.
Therefore, by monitoring how much time each step of the computation takes, it is sometimes possible to calculate what the secret key was.

Even though power consumption analysis and timing analysis may seem nearly impossible to do right, they are powerful techniques which can break ciphers which were not designed to resist them \cite[p.~793]{computer-networks-tanenbaum-2012}.

\subsection{Public-key algorithms}

Distributing the secret keys was always a challenge in cryptographic systems. It had to be distributed, otherwise cryptography could not be used, but it could only be distributed to some hosts.
In 1976, Diffie and Hellman proposed a new kind of system. In it, there were two keys, one for encryption and one for decryption, which could not easily be derived from one another \cite[p.~794]{computer-networks-tanenbaum-2012}.

This allows for a party interested in a safe communication channel to publish the public key, which will then be used by the senders to encrypt the message, and keep the private key, which will be used by the recipient to decrypt the message.

As a note on terminology, I will try to use \textit{public} and \textit{private} when referring to public-key algorithms and \textit{secret} when writing about symmetric-key cryptography.

\subsubsection{RSA}

One algorithm which implements public-key cryptography is the RSA.
Its security is based on the difficulty of factoring large numbers \cite[p.~795]{computer-networks-tanenbaum-2012}.

It is important to note that RSA is too slow for encrypting large volumes of data, so it is widely used just for key distribution.
After keys have been safely exchanged, a symmetric-key algorithm such as AES is used for data encryption \cite[p.~796]{computer-networks-tanenbaum-2012}.

There are other public-key schemes which are based on \textbf{computing discrete logarithms} and on \textbf{elliptic curves} \cite[p.~797]{computer-networks-tanenbaum-2012}.

\subsection{Digital signatures}

Three conditions are important for digital signatures.

\begin{itemize}
\item The receiver can verify the identity of the sender.
\item The sender cannot later repudiate the contents of the message.
\item The receiver cannot possibly have concocted the message himself.
\end{itemize}

\subsubsection{Symmetric-key signatures}

One approach to digital signatures is having an authority that knows everything and which is trusted by everyone.
This entity then can also know the secret key of each agent, therefore allowing it to confirm that an encrypted message actually belongs to a specific agent \cite[p.~798]{computer-networks-tanenbaum-2012}.

\subsubsection{Public-key signatures}

Public-key cryptography can make an important contribution to digital signatures. A possibility is to have Alice encrypt a message using her private key and then encrypt this message with Bob's public key.
\(E_B(D_A(P))\) can be decrypted by Bob and not anybody else \cite[p.~799]{computer-networks-tanenbaum-2012}.

There are problems related to the environment in which public-key cryptography is used.
For instance, Bob can present \(D_A(P)\) to show that he got a message encrypted with Alice's private key.
However, if Alice discloses her private key, then anybody could have send the message and there is no way for Bob to held Alice accountable \cite[p.~800]{computer-networks-tanenbaum-2012}.

Also, the keys cannot be changed periodically, otherwise it would be impossible to validate old messages.

The industry \textit{de facto} standard for public-key signatures is the RSA algorithm.
However, there is also the DSS algorithm, which was proposed by NIST in 1991.
It was heavily criticized for being developed behind closed doors \cite[p.~800]{computer-networks-tanenbaum-2012}.

\subsubsection{Message digests}

Signature methods often couple integrity and confidentiality. However, confidentiality isn't always required.
In these cases, encrypting only a message digest of the plaintext is enough.

MD5 was a popular message digest. Collisions have been found since 2008 \cite[p.~804]{computer-networks-tanenbaum-2012}.

SHA-1 is a hash function which takes an input and produces a 160-bit output.
In 2017, CWI Amsterdam and Google demonstrated a collision attack against SHA-1, publishing two dissimilar PDF files which produced the same hash.

SHA-2 includes significant changes from its predecessor. The SHA-2 family consists of six similar hash functions: SHA-224, SHA-256, SHA-384, SHA-512, SHA-512/224, SHA-512/256.
SHA-2 is prone to length extension attacks, rendering it insecure for some applications.
It is recommended to switch to SHA-3 for 512-bit hashes.
Using SHA-512/224 and SHA-512/256 instead of SHA-224 and SHA-256 is faster on x86-64 processor architecture, mainly because SHA-512 works on 64-bit instead of 32-bit words.

\subsubsection{The birthday attack}

To subvert a \(m\)-bit message digest, around \(2^{m/2}\) operations are needed \cite[p.~804]{computer-networks-tanenbaum-2012}.

\subsection{Management of public keys}

A problem with the solution of just publishing your public key on your own website is that the DNS resolution might be a vulnerability.

\subsubsection{Certificates}

The solution for this problem is the use of a \textbf{certificate authority (CA)} \cite[p.~807]{computer-networks-tanenbaum-2012}.
CAs issue public certificates that a given public key belongs to principal.
These certificates include an encrypted message digest, which can be validated offline.
Because of this, the CAs do not become a bottleneck for certificate validation.

\subsubsection{X.509}

X.509 is the standard for certificates, which ensures that each CA uses the same format.

\subsubsection{Public key infrastructure}

Public key infrastructure (PKI) is a way for certifying public keys without centralized CAs.
This is important so that if a given CA has its private key compromised, not all certificates in the world are invalidated.

The PKI is a hierarchical authority.
For validating a single certificate it is usually necessary a series of certificates which go back to a root of the PKI tree.
This is called a \textbf{chain of trust} or a \textbf{certification path} \cite[p.~812]{computer-networks-tanenbaum-2012}.

The roots of the PKI are sometimes referred to as \textbf{trust anchors}.
This prevents all issues which would come with having a single worldwide authority.

The issue of certificate revocation complicates matters.
This is implemented through certification revocation lists (CRLs) for certificates which have not yet expired \cite[p.~813]{computer-networks-tanenbaum-2012}.

\subsection{Communication security}

Communication security deals with how to get the bits secretly and without modification from source to destination and how to keep unwanted bits out \cite[p.~813]{computer-networks-tanenbaum-2012}.

\subsubsection{IPsec}

One possibility for secure connections is to handle encryption at the application layer.
However, this would requires changing all existing applications, so an alternative to end-to-end encryption is to perform encryption in a layer below the application layer, such as the transport layer.

After some discussion, the view that the encryption and decryption should happen in the network layer was mostly accepted and it got a standard.
The argument was that having network layer encryption does not prevent security-aware users from doing it right and it also helps security-unaware users \cite[p.~814]{computer-networks-tanenbaum-2012}.

The result of this was IPsec. However, not all users wanted encryption because it was computationally expensive.
Rather than making it optional, a \textbf{null algorithm} was allowed to be used.
Another reason for supporting multiple algorithms in IPsec is that if an algorithm is broken, IPsec does not become entirely useless.

The major services provided by IPsec are \textbf{secrecy}, \textbf{data integrity}, and \textbf{protection from replay attacks}.
All of these IPsec services are based on symmetric-key cryptography because it has better performance than public-key cryptography \cite[p.~814]{computer-networks-tanenbaum-2012}.

IPsec also offers multiple granularities, so it is possible to protect a single TCP connection, all traffic between a pair of hosts, or all traffic between a pair of routers.
Even though IPsec is in the IP layer, it is connection-oriented \cite[p.~814]{computer-networks-tanenbaum-2012}.
This is because in order to have security, a key must be established and used for some period of time.
One IPsec connection is called a \textbf{security association (SA)} \cite[p.~815]{computer-networks-tanenbaum-2012}.

IPsec can be used in either \textbf{transport mode}, in which the IPsec header is inserted after the IP header, and in \textbf{tunnel mode} in which the entire IP packet is encapsulated in the body of a new IP packet.
Tunnel mode can help foil \textbf{traffic analysis} to some extent because it can aggregate a bundle of TCP connections as a single encrypted stream, but it increases packet size more than transport mode does.

\textbf{Hashed message authentication code (HMAC)} is a scheme which computes the hash over the concatenation of the payload and the secret key.
The main advantage of HMAC over public-key cryptography is its performance. As one might expect, this provides integrity but no confidentiality.

IPsec can use \textbf{authentication header (AH)} and \textbf{encapsulated security payload (ESP)} as headers.
ESP is generally better because it also provides encryption, even though it does not check part of the IP header like AH does \cite[p.~818]{computer-networks-tanenbaum-2012}.

\subsubsection{Firewalls}

Even though being able to communicate with any computer in the Internet is useful, it might be unnecessary exposure from a corporate point-of-view.
There is both the risk of information leaking out and the risk of information leaking in \cite[p.~818]{computer-networks-tanenbaum-2012}.
Firewalls are a way to filter incoming and outgoing traffic. In many companies, they are the only gateway to get to the Internet, so all traffic might be inspected.

The firewall acts as a \textbf{packet filter}. It can either forward or drop packets, depending on its configuration.
Because many processes use a specific set of ports, many unused ports can be blocked as they are only potential attack vectors.
For instance, port 80 could be blocked so that no HTTP traffic was allowed, while 443 could remain open so that HTTPS traffic was allowed.

Firewalls have become much more sophisticated over time. This is because it proved difficult to write useful rules which could be applied to every single packet.
\textbf{Stateful firewalls} map packets to connections and thus allow for more complex settings, such as allowing an external server to send packets to an internal host only if the internal host first establishes a connection with the external server.

Lastly, firewalls can also implement \textbf{application-level} gateways
This process involves the firewall inspecting the packet contents to understand what the application is doing.
This allows the firewall to distinguish between HTTP traffic used for browsing Wikipedia and HTTP traffic used for peer-to-peer file sharing.
It is important to note that outgoing traffic can also be inspected, so that raw sensitive data never leaves the company office \cite[p.~819]{computer-networks-tanenbaum-2012}.
However, cryptography can be used to mask the outgoing traffic.

Firewalls are network layer devices which peek at the transport and application layers to work, this violates the standard layering of protocols \cite[p.~820]{computer-networks-tanenbaum-2012}.
This is a reason for why some network purists consider firewalls a blemish on the architecture of the Internet.

In order to prevent a firewall breach from allowing complete access to the internal network, multiple firewall layers might be used.
Firewalls offer no protection against \textbf{DoS} and \textbf{DDoS} attacks \cite[p.~820]{computer-networks-tanenbaum-2012}.

\subsubsection{Virtual private network (VPN)}

Some large companies used to have physical network lines between its multiple facilities.
These lines defined a \textbf{private network}.
However, leasing private lines is very expensive, so many companies have financial interest in migrating their networks to the public network, but without giving up the security and privacy of a private network \cite[p.~821]{computer-networks-tanenbaum-2012}.
This led to the invention of VPNs, which are overlay networks on top of public networks with most of the properties of private networks.
They are called virtual because very much like virtual circuits are not real circuits and virtual memory is not real memory virtual networks are not real networks \cite[p.~821]{computer-networks-tanenbaum-2012}.

One popular approach is to build VPNs over the Internet using firewalls. An interesting advantage is that tunnels can be set up on demand to include, for example, the computer of an employee at his home or while he is traveling as long as he has an Internet connection.

When the system is brought up, each pair of firewalls has to negotiate the parameters of its security association, including the services, modes, algorithms, and keys. If IPsec is used for tunneling, it is possible to aggregate all traffic between any pair of offices into a single authenticated, encrypted SA. This can provide integrity control, secrecy, and even some immunity to traffic analysis.

Many firewalls have built-in VPN capabilities.
Some routers can also do this. Therefore, firewalls, VPNs, and IPsec with ESP in tunnel-mode are a natural combination.
For a router in the Internet, a packet traveling along a VPN tunnel is just another IP packet.
The only difference being the presence of the IPsec header after the IP header, which does not matter for the forwarding process \cite[p.~822]{computer-networks-tanenbaum-2012}.

Another possibility is to have the ISP set up the VPN. Using \href{https://en.wikipedia.org/wiki/Multiprotocol_Label_Switching}{multiprotocol label switching}, paths for the VPN traffic can be set up across the ISP network between the company offices. These paths keep the VPN traffic separate from public traffic and can be guaranteed better quality of service.

Except for the configuration steps, VPNs are completely transparent for end users \cite[p.~822]{computer-networks-tanenbaum-2012}.

\subsubsection{Wireless security}

It is very easy to design a system using VPNs and firewalls that is logically completely secure yet leaks like a sieve.
This happens if some machines use wireless and radio communication, which passes right over the firewall in both directions.
The range of 802.11 networks is often a few hundred meters, so unprotected wireless networks can be a major vulnerability \cite[p.~823]{computer-networks-tanenbaum-2012}.

Data link level security protocols such as WPA2 provide real security.
WEP and WPA are too weak and should not be used \cite[p.~824]{computer-networks-tanenbaum-2012}.

There are two scenarios in which WPA2 is used.

\textbf{In enterprise settings}, a separate authentication server can use provided username and passwords to determine if a wireless client is allowed to access the network.

\textbf{In residential settings}, there is no authentication server. Instead, there is a single shared password that is used by clients to access the network. This setup is much simpler, but it is also less secure. In this setup, a handshake is performed so that each client has two keys, one for direct communication with the access point (AP) and a key which is shared across all clients so that the AP can broadcast packages.

There are two protocols which dictate how these keys are actually used to provide security.
The first one was \textbf{TKIP}, which has been broken and should no longer be used.
The newer protocol is \textbf{CCMP}, which is stronger and has not been broken \cite[p.~825]{computer-networks-tanenbaum-2012}.

\subsubsection{Bluetooth security}

Bluetooth has a shorter range than 802.11. However, it is also a possible vulnerability.
A Bluetooth keyboard output, for instance, could be sniffed to find out what someone was typing.
To establish a channel, the slave and master go through a pairing process, which may involve a passkey, for example.
After pairing, they negotiate whether that channel will be encrypted, integrity controlled, or both \cite[p.~827]{computer-networks-tanenbaum-2012}.

\section{Solved exercises}

\subsection{Solved course exercises}
\setcounter{Exercise}{0}

\begin{Exercise}
When the IPv6 protocol is introduced, does the ARP protocol have to be changed?
If so, are the changes conceptual or technical?
From \cite{computer-networks-tanenbaum-2012}.
\end{Exercise}
\begin{Answer}
Conceptually, there are no changes.
Technically, the IP addresses requested are now bigger, so bigger fields are needed.
It is worth noting that even though IPv6 does not support broadcast the same way as IPv4 did, you could use multicast to make a protocol very similar to ARP.
\end{Answer}

\begin{Exercise}
If one could use IP, ICMP, and ARP:
\begin{enumerate}
    \item How could one write a program so that they could determine whether an IP address was already in use or not?
    \item How could one determine the MTU of the network between point A and B?
    Would this always work? If not, when would it fail?
\end{enumerate}
\end{Exercise}
\begin{Answer}
\begin{enumerate}
    \item They could send an ARP request for this IP and see if any MAC address comes back.
    If one does, then that IP is already in use.
    \item One could set the \textit{don't fragment} (DF) bit in the IP headers of the outgoing packets and rely on the ICMP \textit{Fragmentation Needed} message to find out what the path MTU is. Any device along the path whose MTU is smaller than the packet the source host sent will drop it and send back a message containing its MTU, allowing the source host to reduce its MTU appropriately. The process is repeated until the MTU is small enough to traverse the entire path without fragmentation.

    No, it wouldn't always work. Many network security devices block all ICMP messages. This will also block the errors that are necessary for the proper operation of PMTUD.

    See \href{https://en.wikipedia.org/wiki/Path_MTU_Discovery}{Path MTU Discovery (PMTUD)}.
\end{enumerate}
\end{Answer}

\begin{Exercise}
What is Proxy ARP? How does it work?
\end{Exercise}
\begin{Answer}
Proxy ARP is used to make a host appear in a network even though it is in another network.

It works with the help from routers as Ethernet-level broadcasts are not forwarded by routers.
The router has to reply to the ARP request with \textbf{its own Ethernet address}.
Then the sender host can send frames which are meant to the receiver host \textbf{to the router}, which will then forward these frames to the correct device.
\end{Answer}

\begin{Exercise}
Can an ARP table contain multiple entries for the same MAC associated with different IP addresses?
\end{Exercise}
\begin{Answer}
Yes, this can be a consequence of proxy ARP.
Multiple IP addresses may have been resolved to the MAC of the router.
\end{Answer}

\begin{Exercise}
A TCP/IP device in a network has the IP address 128.138.243.100 and the mask 255.255.255.192.
Find out the network number, the network broadcast address, the first and last valid IP addresses.
Assume a classful system. Seems to be from \cite{unix-system-administration-handbook-nemeth-2000}.
\end{Exercise}
\begin{Answer}
The logic and of 128.138.243.100 and 255.255.255.192 is 128.138.243.64, which is the network number.
As it is a /26, it has \(2^{32-26} - 2 = 2^{6} - 2 = 64 - 2 = 62\) hosts.

One could express the network number as 128.138.243.64/26.

The network broadcast address is 128.138.243.127.

The first valid IP address is 128.138.243.65.

The last valid IP address is 128.138.243.126.

The \texttt{ipcalc 128.138.243.100/26} command produces the following output.

\small\begin{verbatim}
Address:   128.138.243.100      10000000.10001010.11110011.01 100100
Netmask:   255.255.255.192 = 26 11111111.11111111.11111111.11 000000
Wildcard:  0.0.0.63             00000000.00000000.00000000.00 111111
=>
Network:   128.138.243.64/26    10000000.10001010.11110011.01 000000
HostMin:   128.138.243.65       10000000.10001010.11110011.01 000001
HostMax:   128.138.243.126      10000000.10001010.11110011.01 111110
Broadcast: 128.138.243.127      10000000.10001010.11110011.01 111111
Hosts/Net: 62                   Class B
\end{verbatim}
\end{Answer}

\begin{Exercise}
Write down all you know about hubs, switches, and routers.
Mention technology, operation principle, bandwidth usage, broadcast domains, collision domains, and spanning trees.
\end{Exercise}
\begin{Answer}
Hubs operate on the physical layer, they just connect multiple lines as if they were the same single line. This is why they only define a single common collision domain.

Switches, on the other hand, define a single collision domain for each port as long as they have a full-duplex point-to-point connection. Switches, however, still define a single broadcast domain.
Switches operate on the second layer of the OSI stack, forwarding frames.
Switches are auto-configurable, in the sense that one could just plug one in and wander away, leaving it to configure itself. This works because algorithms such as the spanning three algorithm allow for switch to detect cycles and not propagate the same frames around forever.

Routers define a single broadcast domain per router interface. Routers operate on the third layer of the OSI stack, forwarding packets.
\end{Answer}

\begin{Exercise}
Determine the ARP sequence in the sending of a datagram, for the first time, from A (192.31.65.7) to B (192.31.62.8).
Specify for each message what are the source hardware address, the destination hardware address, the source IP address, and the destination IP address.
Both machines use a /24 mask. Is there any missing information?
\end{Exercise}
\begin{Answer}
It is missing whether there is a router between A and B, and whether or not this router does proxy ARP.
This is relevant because A and B are not in the same network and ARP requires broadcasts from the source machine to arrive at the destination machine.
Assuming there is a router R doing proxy ARP in the way, the sequence is as follows.

\begin{center}
\begin{tabular}{c|c|c|c}
    \(E_A\) & \(I_A\) &       0 & \(I_B\) \\
    \(E_R\) & \(I_R\) & \(E_A\) & \(I_A\) \\
\end{tabular}
\end{center}

If, instead, the router R were to just forward broadcasts, the sequence would be as follows.

\begin{center}
\begin{tabular}{c|c|c|c}
    \(E_A\) & \(I_A\) &       0 & \(I_B\) \\
    \(E_B\) & \(I_B\) & \(E_A\) & \(I_A\) \\
\end{tabular}
\end{center}
\end{Answer}

\begin{Exercise}
Explain the following routing algorithms and compare them with each other. Which of these algorithms are related to static routing and which are related to dynamic routing?

\begin{enumerate}
    \item Shortest-path (SP)
    \item Distance-vector (DV)
    \item Link-state (LS)
\end{enumerate}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
Assuming a network uses the distance vector routing algorithm, compute the new distance vector for router J.

\begin{center}
\begin{tabular}{c|c|c|c|c|c|c|c|c|c|c|c|c}
      & A & B & C & D & E & F & G & H & I & J & K & L \\ \hline
    A & 0 & 12 & 25 & 40 & 14 & 23 & 18 & 17 & 21 & 9 & 24 & 29 \\
    I & 24 & 36 & 18 & 27 & 7 & 20 & 31 & 20 & 0 & 11 & 22 & 33 \\
    H & 20 & 31 & 19 & 8 & 30 & 19 & 6 & 0 & 14 & 7 & 22 & 9 \\
    K & 21 & 28 & 36 & 24 & 22 & 40 & 31 & 19 & 22 & 10 & 0 & 9
\end{tabular}
\end{center}

Assume the following delays.

\begin{center}
\begin{tabular}{c|c|c}
    J & A &  8 ms \\
    J & I & 10 ms \\
    J & H & 12 ms \\
    J & K &  6 ms
\end{tabular}
\end{center}
\end{Exercise}
\begin{Answer}
\begin{center}
\begin{tabular}{c|c|c|c|c|c|c|c|c|c|c|c|c}
      & A & B & C & D & E & F & G & H & I & J & K & L \\ \hline
    J & 8 & 20 & 28 & 20 & 17 & 30 & 18 & 12 & 10 & 16 & 6 & 15
\end{tabular}
\end{center}
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
A router has the following entries on its routing table:

\begin{center}
\begin{tabular}{c|c|c}
    Destination network & Mask          & Next hop    \\ \hline
            135.46.56.0 & 255.255.252.0 & Interface 0 \\ \hline
            135.46.60.0 & 255.255.252.0 & Interface 1 \\ \hline
            192.53.40.0 & 255.255.254.0 & Interface 2 \\ \hline
            Default     &       0.0.0.0 & Interface 3
\end{tabular}
\end{center}

Determine the next hop for datagrams addressed to the following addresses.

\begin{enumerate}
    \item 135.46.63.10
    \item 135.46.57.14
    \item 135.46.52.2
    \item 192.53.40.7
    \item 192.53.56.7
\end{enumerate}
\end{Exercise}
\begin{Answer}
\begin{enumerate}
    \item 135.46.63.10 \& 255.255.254.0 = 135.46.62.0. No match for this prefix size.

    135.46.63.10 \& 255.255.252.0 = 135.46.60.0. \textbf{Matches interface 1}.

    \item 135.46.57.14 \& 255.255.254.0 = 135.46.56.0. No match for this prefix size.

    135.46.57.14 \& 255.255.252.0 = 135.46.56.0. \textbf{Matches interface 0}.

    \item 135.46.52.2 \& 255.255.254.0 = 135.46.52.0. No match for this prefix size.

    135.46.52.2 \& 255.255.252.0 = 135.46.52.0. No match for this prefix size.

    135.46.52.2 \& 0.0.0.0 = 0.0.0.0. \textbf{Matches interface 3}.

    \item 192.53.40.7 \& 255.255.254.0 = 192.53.40.0. \textbf{Matches interface 2}.

    \item 192.53.56.7 \& 255.255.254.0 = 192.53.56.0. No match for this prefix size.

    192.53.56.7 \& 255.255.252.0 = 192.53.56.0. No match for this prefix size.

    192.53.56.7 \& 0.0.0.0 = 0.0.0.0. \textbf{Matches interface 3}.
\end{enumerate}
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
Which problems of the distance vector algorithm are solved by the link state algorithm?
\end{Exercise}
\begin{Answer}
The count-to-infinity problem, which is why the distance vector may take a very long time to notice that a node is unreachable, is solved because now at every synchronization the whole topology of the network is sent to each node.
% TODO: finish.
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
What is the reason for the active FTP protocol? Which problem does it solve?
\end{Exercise}
\begin{Answer}
The biggest issue of FTP passive mode is the need to allow any remote connection to high numbered ports on the server. Active FTP allows the server to only use the port 20 as the data port, which may simplify firewall rules on the server side.
\end{Answer}

\begin{Exercise}
What are the two most important features of the network layer in a datagram network such as IP?
\end{Exercise}
\begin{Answer}
The two most important features are packet forwarding (the transfer of a packet from an incoming link to an outgoing link at a single router) and packet routing (finding a path from the source to the destination) \cite[p.~305]{computer-networking-kurose-2012}.
\end{Answer}

\begin{Exercise}
In link state routing, how the routers determine whether a link state packet has already been seen?
\end{Exercise}
\begin{Answer}
The packets include a sequence number. If the sequence number of a new packet coming from another router is lower than the highest already seen from that router it is discarded because that router already sent newer data. If it is a duplicate, it is also discarded. If it is the new highest sequence number for that router, it is forwarded on all lines except the one it arrived on \cite[p.~376]{computer-networks-tanenbaum-2012}.
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
What is the difference between message confidentiality and message integrity? Can you have one without the other?
\end{Exercise}
\begin{Answer}
\textbf{Message confidentiality} is the property that the original message can not be obtained by an attacker who intercepts the ciphertext of the original message.
\textbf{Message integrity} is the property that the receiver can detect whether the message sent was altered in transit.

The two are different concepts and it is possible to have one without the other.

An encrypted message that is mangled in a way that the receiver cannot detect will still have \textbf{message confidentiality}.
Similarly, a message that is sent in plaintext could have \textbf{message integrity} despite it not being confidential.
\end{Answer}

\begin{Exercise}
Consider the Internet and its different protocols. A MUA sends a message to an e-mail server within its own domain. The client and the server are in the same subnet and both are with all network parameters properly configured. List, in order, which (network, transport, and application) protocols will be captured by a sniffer and what they do when used. Ignore caching.
\end{Exercise}
\begin{Answer}
DNS resolution will require DNS, which uses UDP over IP.
SMTP will require SMTP, which uses TCP over IP.
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
A router has the following routing table. For each of the following datagrams list all possible routes and the selected route.

\begin{center}
\begin{tabular}{c c c}
    Destination network & Next hop   & Mask            \\ \hline
           195.112.92.1 & 200.10.1.1 & 255.255.252.255 \\ \hline
           195.112.80.0 & 192.10.2.1 & 255.255.240.0   \\ \hline
           195.112.64.0 & 192.10.2.2 & 255.255.192.0   \\ \hline
                Default & 200.10.1.2 & 0.0.0.0
\end{tabular}
\end{center}

\begin{enumerate}
    \item 195.112.92.1
    \item 195.112.94.1
    \item 195.112.96.1
    \item 195.112.130.1
\end{enumerate}
\end{Exercise}
\begin{Answer}
\begin{enumerate}
    \item 195.112.92.1 \& 255.255.252.255 = 195.112.92.1. Possible. \textbf{Selected}.

    195.112.92.1 \& 255.255.240.0 = 195.112.80.0. Possible.

    195.112.92.1 \& 255.255.192.0 = 195.112.64.0. Possible.

    195.112.92.1 \& 0.0.0.0 = 0.0.0.0. Possible.

    \item 195.112.94.1 \& 255.255.252.255 = 195.112.94.1. Not possible.

    195.112.94.1 \& 255.255.240.0 = 195.112.80.0. Possible. \textbf{Selected}.

    195.112.94.1 \& 255.255.192.0 = 195.112.64.0. Possible.

    195.112.94.1 \& 0.0.0.0 = 0.0.0.0. Possible.

    \item 195.112.96.1 \& 255.255.252.255 = 195.112.96.1. Not possible.

    195.112.96.1 \& 255.255.240.0 = 195.112.96.0. Not possible.

    195.112.96.1 \& 255.255.192.0 = 195.112.64.0. Possible. \textbf{Selected}.

    195.112.96.1 \& 0.0.0.0 = 0.0.0.0. Possible.

    \item 195.112.130.1 \& 255.255.252.255 = 195.112.130.1. Not possible.

    195.112.130.1 \& 255.255.240.0 = 195.112.128.0. Not possible.

    195.112.130.1 \& 255.255.192.0 = 195.112.128.0. Not possible.

    195.112.130.1 \& 0.0.0.0 = 0.0.0.0. Possible. \textbf{Selected}.
\end{enumerate}
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
What is the prefix and the most restrictive mask for an IP network in which a server has the address 192.168.1.5 and the single router has the address 192.168.2.1?
\end{Exercise}
\begin{Answer}
We need to allow the last 10 bits for the host to uniquely identify machines in this network.
So 10 bits, making the mask 255.255.252.0.
\end{Answer}

\begin{Exercise}
An organization has the following networks.
\begin{enumerate}
    \item 200.10.0.0/26
    \item 200.10.0.64/26
    \item 200.10.0.128/26
    \item 200.10.0.192/26
    \item 200.10.1.0/26
    \item 200.10.1.64/26
    \item 200.10.1.128/25
\end{enumerate}
What is the address block allocated to the institution?
\end{Exercise}
\begin{Answer}
200.10.0.0/23.
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
What are the advantages of hierarchical routing for the routing process?
\end{Exercise}
\begin{Answer}
For the routing process, hierarchical routing reduces routing table size, which greatly impacts routing performance.
Keeping very large routing tables, even if they fit in memory, means that more bandwidth will be used when running the routing algorithms to synchronize routing tables between routers.

It is also worth noting that in large networks, hierarchical routing allows each region to use whatever routing algorithm is best for it. If there weren't multiple hierarchical levels for routing, every router in the whole network would have to use the same routing algorithm.

See \ref{Distance vector routing}, \ref{Link state routing}, and \ref{Hierarchical routing} for more.
\end{Answer}

\begin{Exercise}
An ISP has the 195.168.0.0/16 block. Divide it in three blocks of 30 addresses, one block of 62 addresses, and two blocks of 126 addresses.
\end{Exercise}
\begin{Answer}
\begin{enumerate}
    \item 195.168.0.0/27
    \item 195.168.0.32/27
    \item 195.168.0.64/27
    \item 195.168.0.128/26
    \item 195.168.1.0/25
    \item 195.168.1.128/25
\end{enumerate}

An illustrative table of the division follows.

\begin{center}
\begin{tabular}{r r c}
          Prefix size &                First address & Used                               \\ \hline
                   27 &                  195.168.0.0 & \checkmark                         \\ \hline
                   27 &                 195.168.0.32 & \checkmark                         \\ \hline
                   27 &                 195.168.0.64 & \checkmark                         \\ \hline
                   27 &                 195.168.0.96 &                                    \\ \hline
    \multirow{2}*{26} & \multirow{2}*{195.168.0.128} & \multirow{2}*{\checkmark}       \\ \\ \hline
    \multirow{2}*{26} & \multirow{2}*{195.168.0.192} & \multirow{2}*{}                 \\ \\ \hline
    \multirow{4}*{25} & \multirow{4}*{  195.168.1.0} & \multirow{4}*{\checkmark} \\ \\ \\ \\ \hline
    \multirow{4}*{25} & \multirow{4}*{195.168.1.128} & \multirow{4}*{\checkmark} \\ \\ \\ \\ \hline
\end{tabular}
\end{center}
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
In a Windows XP machine, the command \texttt{netstat -na} presented the following result, explain it.

\texttt{TCP 127.0.0.1:2222 0.0.0.0:* LISTENING}
\end{Exercise}
\begin{Answer}
There is a TCP socket listening on port 2222 for connections from any address and any port.
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
Repeated from 11.
\end{Exercise}
\begin{Answer}
Will note be done.
\end{Answer}

\begin{Exercise}
Assume that a machine has infinite processing capacity and infinite memory.
What would be the maximum theoretical number of TCP connections established at the same time of this machine?
\end{Exercise}
\begin{Answer}
Because each TCP connection identifier consists of (source IP address, source port, destination IP address, destination port), \textbf{assuming we can use all IPv4 addresses}, we would have \(2^{32} \cdot 2^{16} \cdot 2^{32} \cdot 2^{16} = 2^{96}\) possible TCP connections to this machine.

\begin{displayquote}
A TCP port plus its host's IP address forms a 48-bit unique end point.
The source and destination end points together identify the connection.
\cite[p.~557]{computer-networks-tanenbaum-2012}
\end{displayquote}
\end{Answer}

\begin{Exercise}
What advantages do autonomous systems bring to the routing process?
\end{Exercise}
\begin{Answer}
% Review.
The main advantages that autonomous systems bring to the routing process are intradomain routing freedom (intradomain routing can be done however deemed adequate) and a reduction of the number of systems visible for inter-domain routing.
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
UDP only uses the destination port to demultiplex the received datagrams.
TCP, on the other hand, uses a pair of endpoints.
Why can't TCP only use the destination port?
\end{Exercise}
\begin{Answer}
The reason why TCP can't use only the destination port is that UDP datagrams are addressed to a host and port, while TCP datagrams belong to a connection identified also by the source host and source port.
Therefore, if only the destination port was used to demultiplex TCP datagrams and two connections were established using the same destination port, traffic from both connections would be mixed.
% Review.
\end{Answer}

\begin{Exercise}
What are autonomous systems?
What is the main reason for their creation?
How are they used in the Internet?
\end{Exercise}
\begin{Answer}
An AS is a portion of a network that is under another administrative authority.
The main reason for their creation was to decentralize the network, providing both hierarchy and freedom for choosing whichever internal routing protocol (IRP) the responsible authority wanted to use.
In the Internet, generally ISPs have their own autonomous systems, which they route internally however they deem appropriate and externally using BGP, which is the external routing protocol (ERP) of the Internet.
\end{Answer}

\begin{Exercise}
What problem could arise if TCP connections always started with the sequence number zero?
\end{Exercise}
\begin{Answer}
The main problem is that a segment which is still present in the network from a previous connection between two hosts might be mistaken for a valid segment in a new connection between these two hosts if they happen to be using the same ports.
Using a random or monotonically increasing segment sequence number greatly reduces the risk of this happening \cite[p.~236]{computer-networking-kurose-2012}.

Another problem is that attacks based on sequence number spoofing are possible in the Internet if the attacker gags a host which is trusted by the target, impersonates the IP address and completes the three-way handshake based on its guess at the next initial sequence number to be used. See \href{https://tools.ietf.org/html/rfc1948}{RFC 1948} for more.
\end{Answer}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\begin{Exercise}
\end{Exercise}

\subsection{Solved textbook exercises}
\setcounter{Exercise}{0}

\begin{Exercise}
Give two example computer applications for which connection-oriented service is appropriate.
Now give two examples for which connectionless service is best.
From \cite{computer-networks-tanenbaum-2012}.
\end{Exercise}
\begin{Answer}
File transfer, remote login, and video on demand need connection-oriented service.
On the other hand, credit card verification and other point-of-sale terminals, electronic funds transfer, and many forms of remote database access are inherently connectionless, with a query going one way and the reply coming back the other way.
\end{Answer}

\begin{Exercise}
Give three examples of protocol parameters that might be negotiated when a connection is set up.
From \cite{computer-networks-tanenbaum-2012}.
\end{Exercise}
\begin{Answer}
\begin{enumerate}
    \item Window size.
    \item Maximum packet size.
    \item Data rate.
\end{enumerate}
\end{Answer}

\begin{Exercise}
Assuming that all routers and hosts are working properly and that all software in both is free of all errors, is there any chance, however small, that a packet will be delivered to the wrong destination?
From \cite{computer-networks-tanenbaum-2012}.
\end{Exercise}
\begin{Answer}
Yes. A noise burst could drastically change a packet. With a \(k\)-bit checksum, there is a probability of \(2^{-k}\) that \textbf{the error is undetected}. If the destination field or, equivalently, virtual-circuit number, is changed, the packet will be delivered to the wrong destination and accepted as genuine. Put in other words, an occasional noise burst could change a perfectly legal packet for one destination into a perfectly legal packet for another destination.
\end{Answer}

\chapter{Database theory}

Relational databases arose in the 80's. NoSQL databases are much more recent.

Transactions are all about atomic updates that either succeed or fail.

\textbf{The CAP theorem.} If a system has a network \textbf{partition}, it
cannot be fully \textbf{consistent} and fully \textbf{available}. In real-world
scenarios, usually the tradeoff is between consistency and response-time.

\section{Distributed systems}
Distributed systems may use sharding, in which only one copy of each aggregate
exists, or replication, on which multiples copied of the data are distributed.
\textbf{Replication improves availability and resilience}.

\section{Sample problems}
Two different users, interacting with two different servers that talk to the
same database retrieve data, edit it, and then write it back. If no precautions
are taken, this causes a write-write conflict (one update will overwrite the
other).

Solution A. Hold a transaction open until the update is complete. This makes it
impossible for two users to view the data at the same time. \textit{This is
impractical in most systems}.

Solution B. Make the final update a transaction so that the updates don't mix
together and use an \textbf{offline lock}. This is done by giving each record a
version stamp, if at the time of the update the version stamp has already been
updated (due to a database modification), you solve the conflict anyway you
want.

\section{Foreign keys}
A foreign key is a field in a table that uniquely identifies an entry in another
table. The table that contains this field is the \textbf{child table} and the
referenced table is said to be the \textbf{parent table}.

\section{NoSQL}
The problem with relational databases was that a single logical structure in the
application ends up being split into several rows and tables. This is known as
\textbf{impedance mismatch}: the difficulties encountered when trying to map
an object into a table.

This led to \textbf{object databases}. They did not become popular because many
systems used relational databases for integration. This way, relational has
dominated into the 2000s. The change that happened to bring attention no NoSQL
was the popularization of the Internet. Some sites got a lot of traffic and
needed to scale. Using many simple computers, as Google and Facebook do is not
relational database friendly, as these databases are not easily distributed.

NoSQL (the term) was a hashtag someone came up with for a meetup Johan
Oskarsson proposed to discuss the problems with relational databases. Defining
NoSQL is almost impossible, but it is possible to list some common
characteristics of NoSQL databases:
\begin{itemize}
 \item They are non-relational.
 \item Most are cluster-friendly.
 \item Most are open source.
 \item They are related to 21st century web.
 \item They are schema-less.
\end{itemize}

There are four different data models NoSQL databases use.
The simplest one is \textbf{key-value}. It's like a persistent hashmap that can
store any kind of data.

There is also the \textbf{document model}. It is similar to JSON. Differently
from a key-value, this is much more transparent about what the data is.

Having no schema adds a lot of flexibility. But note that schema-less is not
accurate as most if not all documents have an \textit{implicit schema}. For
instance, all items may have \texttt{price} even if it is not required.

Most key-value databases allow you to store metadata about the values, what
makes them somewhat similar to document databases.

Document databases usually provide access by ID, what further blurries the line
between key-value and document databases.

There is also the \textbf{column family model}, which is slightly more complex.
In these databases, a row key maps to a set of column families.

These three types of NoSQL databases are also known as \textbf{aggregate
models}. They are better at clustering because each node gets a set of
aggregates that contain all the data a query needs and thus avoid the need of
building the result from small pieces obtained from different nodes.

If you need to slice data in several different ways, aggregate databases are not
a good idea.

The fourth and last type of NoSQL database is \textbf{graph databases}. These go
in the opposite direction of the other three, making the structure even less
rigid than a table. All four are schema-less and which one you use depends on
how do you work with your data.

If you use aggregates all the time, aggregate oriented databases are your best
bet. If you need to really break things up and jump around in a complex
structure, graph databases are the way to go. But in the end what works best for
you may be the good and old tabular structure provided by relational databases.

NoSQL databases ease development when there are natural aggregates and when
there is just too much data for a single server.
Aggregate-oriented databases are ACID within aggregates, concurrency issues show
up when a single transaction must change multiple documents.

\section{BASE}
Base is an alternative to ACID.
It stands for

\begin{enumerate}
  \item \textbf{B}asic \textbf{A}vailability
  \item \textbf{S}oft state
  \item \textbf{E}ventually consistent
\end{enumerate}

\chapter{Functional programming}
In functional programming, functions are treated as data.

\printbibliography

\end{document}
